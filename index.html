<meta name=monetization content=$ilp.uphold.com/g64DLNdpidDy><meta name=viewport content="width=device-width,initial-scale=1"><meta name=apple-mobile-web-app-capable content=yes><meta name=mobile-web-app-capable content=yes><title>InterPlanetary Transport System</title><style>body{align-items:center;background:#000;bottom:0;display:flex;justify-content:center;left:0;margin:0;overflow:hidden;position:fixed;right:0;top:0}canvas{font-family:sans-serif;height:100%;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:-webkit-crisp-edges;image-rendering:pixelated;image-rendering:crisp-edges;object-fit:contain;position:relative;width:100%}</style><canvas id=g></canvas><script>!function(){function t(t,s,i=1e-5){let h;return t===s?1:(h=Math.abs(t-s),0===t||0===s||b>h?i*b>h:i>h/(Math.abs(t)+Math.abs(s)))}function s(t,s){if(s)return t[0]=s[0],t[1]=s[1],t}function i(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t}function h(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t}function e(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t}function n(t,s){const i=s[0],h=s[1];let e=i*i+h*h;return e>0&&(e=1/Math.sqrt(e)),t[0]=s[0]*e,t[1]=s[1]*e,t}function o(t,s){return Math.hypot(s[0]-t[0],s[1]-t[1])}function r(t,s){const i=s[0]-t[0],h=s[1]-t[1];return i*i+h*h}function c(t){return[(16711680&t)>>16,(65280&t)>>8,255&t]}function a(t=Math.random){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(s=>{let i=16*t()|0;return("x"==s?i:3&i|8).toString(16)}))}function u(t,s){return`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${s})`}function l(t,s){const i=r(s.position,t.position);return 0!==i?M.t*(s.i/i):0}function d(t,o){if(!t.h||!t.acceleration)return;const r=[0,0];s(t.o,t.position),e(t.acceleration,n(r,h(r,t.h.position,t.position)),l(t,t.h)),t.u||(t.u=[0,0]),i(t.u,t.u,e(r,t.acceleration,o)),i(t.position,t.position,e(r,t.u,o))}function f(t,s){const i=t.position[0]-s.position[0],h=t.position[1]-s.position[1],e=t.l+s.l;return e*e>i*i+h*h}function w(t,s){const n=h([0,0],t.position,s.position),o=[1,0,0,1,0,0];return((t,s)=>{let i=Math.sin(s),h=Math.cos(s);t[0]=h,t[1]=i,t[2]=-i,t[3]=h,t[4]=0,t[5]=0})(o,-s.orientation),((t,s,i)=>{let h=s[0],e=s[1];t[0]=i[0]*h+i[2]*e+i[4],t[1]=i[1]*h+i[3]*e+i[5]})(n,n,o),((t,s)=>{const i=s.min,h=s.max;let e=t.position;e[0]=i[0]>e[0]?i[0]:e[0],e[0]=e[0]>h[0]?h[0]:e[0],e[1]=i[1]>e[1]?i[1]:e[1],e[1]=e[1]>h[1]?h[1]:e[1];const n=new z(t.position,e);return t.l*t.l>=n.m})(new y(i([0,0],n,s.p),t.l),new I(s.position,e([0,0],s.p,2)))}function m(t,s){let i=t.clone();return e(i.v.position,i.v.position,s),e(i.v.acceleration,i.v.acceleration,s),e(i.v.u,i.v.u,s),i}function p(t,s,i){t.fillStyle=u(i,1),t.beginPath(),t.arc(s.position[0],s.position[1],s.l,0,6.283185307179586),t.closePath(),t.fill()}function x(t,s,i,h){t.lineWidth=1,t.lineCap="round",t.strokeStyle=u(h,1),t.beginPath(),t.moveTo(s[0],s[1]),t.lineTo(i[0],i[1]),t.closePath(),t.stroke()}function v(t,s,o){x(t,s.start,s.end,o);let r=[0,0];s.g(-M.M);let c=i([0,0],s.S(),e(r,((t,s,i=1)=>(t[0]=s[1],t[1]=s[0],i?t[1]=-t[1]:t[0]=-t[0],t))([0,0],n(r,h(r,s.start,s.end))),M.M));t.fillStyle=u(o,1),t.beginPath(),t.moveTo(s.start[0],s.start[1]),t.lineTo(c[0],c[1]),t.lineTo(s.end[0],s.end[1]),t.lineTo(s.start[0],s.start[1]),t.closePath(),t.fill()}class g extends class{constructor(){this.P=[],this._=[]}B(t){return this.P.push(t),{I:()=>this.L(t)}}once(t){this._.push(t)}L(t){var s=this.P.indexOf(t);s>-1&&this.P.splice(s,1)}T(t){if(this.P.forEach((s=>s(t))),this._.length>0){const s=this._;this._=[],s.forEach((s=>s(t)))}}A(t){return this.B((s=>t.T(s)))}}{constructor(t){super(),this.F=0,this.R=t,window.addEventListener("pointerdown",this.$.bind(this)),window.addEventListener("pointermove",this.$.bind(this)),window.addEventListener("pointerup",this.$.bind(this)),window.addEventListener("blur",this.k.bind(this))}k(){this.F=0}$(t){this.position=this.q(this.R,[t.clientX,t.clientY]),this.F=!!t.buttons,this.T(this.F)}q(t,s){let i=t.getBoundingClientRect();return[t.width/i.width*(s[0]-i.left),t.height/i.height*(s[1]-i.top)]}C(){return this.F}}const M={D:[1334,750],G:164,O:"g",seed:"IPTS",V:1e6,t:1,W:2e3,j:0,H:1300,J:1,K:35,M:12},b=Math.pow(2,-1022);class y{constructor(t,s){this.position=t,this.l=s}N(t){return[this.position[0]+this.l*Math.cos(t),this.position[1]+this.l*Math.sin(t)]}}class S extends y{constructor(t,i,h=0,e,n,o=.8){super(t,i),this.o=[0,0],s(this.o,this.position),this.i=h,this.u=e,this.acceleration=n,this.U=o}X(t){const s=t[0]-this.position[0],i=t[1]-this.position[1];return this.l*this.l>s*s+i*i}clone(){return new S(s([0,0],this.position),this.l,this.i,s([0,0],this.u),s([0,0],this.acceleration),this.U)}}class P extends S{constructor(t,s){super([10,10],5,M.j,[0,0],[0,0]),this.color=c(13016997),this.Y=0,this.Z=0,this.tt=0,this.st=2,this.it=2*M.G,this.ht=2*M.G,this.et=0,this.nt=0,this.id=s??a(),this.ot=t}rt(){this.ct()}step(){this.at&&this.nt++,this.nt>30&&(this.nt=0,this.Z=0),this.et?(this.ht>0||(this.et=0,M.J=1),this.ht--):this.it>this.ht&&(this.ht+=.1)}get ut(){return~~(this.ht/this.it*100)}get at(){return!(!t((s=this.position)[0],(i=this.o)[0],h)||!t(s[1],i[1],h));var s,i,h}get lt(){return this.st>this.Z}ct(){if(!this.lt)return void(M.J=1);const t=this.ot.C();var s,i,r;!this.Y&&t?(this.dt=[0,0],this.ft=this.ot.position,1>this.Z||(M.J=.1,this.et=1)):this.Y&&!t?(e(this.u,this.dt,M.H*this.wt),this.ft=void 0,this.dt=void 0,this.wt=void 0,this.Z++,this.tt++,M.J=1,this.et=0):this.ot.position&&this.ft&&(i=this.dt,r=n(this.dt,h(this.dt,this.ot.position,this.ft)),i[0]=-r[0],i[1]=-r[1],this.wt=(s=o(this.ft,this.ot.position),Math.max(0,Math.min(100,s))/100)),this.Y=t}clone(){let t=new P(this.ot);return t.id=this.id,t.h=this.h?.clone(),t.position=s([0,0],this.position),t.o=s([0,0],this.o),t.u=s([0,0],this.u),t.acceleration=s([0,0],this.acceleration),t.Y=this.Y,t.dt=s([0,0],this.dt),t.wt=this.wt,t.tt=this.tt,t.Z=this.Z,t.ft=s([0,0],this.ft),t.st=this.st,t.ht=this.ht,t}}class _{constructor(t,s,i){this.position=t??[0,0],this.p=s??[1,1],this.orientation=i??0}}class B extends S{constructor(t,s,i,h,e,n,o,r){super(t,s,i*M.V,e,n,o),this.color=c(9137564),this.id=h??a(),this.xt=r}get vt(){return M.t*this.i}get gt(){if(void 0!==this.xt)return new _(this.N(this.xt),[M.M,M.K/2],this.xt)}Mt(t){return Math.sqrt(this.vt/t)}clone(){let t=new B(s([0,0],this.position),this.l,this.i,this.id,this.u,this.acceleration,this.U,this.xt);return t.h=this.h,t}}class z{constructor(t,s){this.start=t,this.end=s}g(t){let s=this.end[0]-this.start[0],i=this.end[1]-this.start[1],h=Math.sqrt(s*s+i*i);return h>0&&(s/=h,i/=h),s*=h+t,i*=h+t,this.start[0]=this.start[0]+s,this.start[1]=this.start[1]+i,this}S(){return[(this.start[0]+this.end[0])/2,(this.start[1]+this.end[1])/2]}get length(){return o(this.start,this.end)}get m(){return r(this.start,this.end)}}class I{constructor(t,s){this.position=t,this.size=s}static bt(t,s){return new I(t,h([0,0],s,t))}get min(){const t=this.position,s=i([0,0],this.position,this.size);return[Math.min(t[0],s[0]),Math.min(t[1],s[1])]}get max(){const t=this.position,s=i([0,0],this.position,this.size);return[Math.max(t[0],s[0]),Math.max(t[1],s[1])]}}class L{constructor({size:t,v:s,yt:i}){this.size=t,this.v=s,this.yt=i}static St(t,i){let h=new P(t);return s(h.position,i.Pt),new L({size:i.size,v:h,yt:i._t.map((t=>new B(s([0,0],t.position),t.l,t.i,t.id,s([0,0],t.u),s([0,0],t.acceleration),t.U,t.xt)))})}step(t){this.v.step(),((t,s)=>{(t=>{let s,i,h,e=[t.v,...t.yt];for(i of e){let e=-1/0;for(h of t.yt){if(i===h)continue;let t=l(i,h);e>t||(e=t,s=h)}i.h=s}})(s);let i=[s.v,...s.yt];for(let s of i)d(s,t*M.J)})(t,this),((t,i)=>{let n=[0,0],r=[i.v,...i.yt];for(let t of r)for(let i of r)if(t!==i&&f(t,i)){s(t.position,t.o);const r=[(t.position[0]*i.l+i.position[1]*t.l)/(t.l+i.l),(t.position[1]*i.l+i.position[1]*t.l)/(t.l+i.l)];let c=[0,0];e(c,h(n,i.position,r),1/o(r,i.position));let a=2*(t.u[0]*c[0]+t.u[1]*c[1])/(t.i+i.i);t.u=e(t.u,[t.u[0]-a*t.i*c[0]-a*i.i*c[0],t.u[1]-a*t.i*c[1]-a*i.i*c[1]],i.U)}let c=i.yt.filter((t=>void 0!==t.xt));for(let t of c)w(i.v,t.gt)})(0,this)}clone(){return new L({size:s([0,0],this.size),v:this.v.clone(),yt:this.yt.map((t=>t.clone()))})}}class T{constructor(t,s){this.Bt=0,this.R=t,this.zt=document.createElement("canvas").getContext("2d"),this.It(),this.Lt=this.R.getContext("2d"),this.Tt=s,this.At=((t,s,i,h)=>{const e=document.createElement("canvas");e.id="bg",e.width=t,e.height=s;const n=e.getContext("2d"),o=[];for(;h>0;h--)o.push([i()*t,i()*s,1.2*i()]);n.fillStyle=u(c(2565956),1),n.fillRect(0,0,t,s);for(let t of o??[])n.beginPath(),n.arc(t[0],t[1],t[2],0,360),n.fillStyle=u(c(16512495),.8),n.fill();return e})(M.D[0],M.D[1],this.Tt,M.W)}set Ft(t){this.Bt=t}It(){this.R.width=M.D[0],this.R.height=M.D[1],this.zt.canvas.width=M.D[0],this.zt.canvas.height=M.D[1]}Rt(t,s){let o=[0,0];for(let r of s.yt??[])if(p(t,r,r.color),void 0!==r.xt){const s=r.N(r.xt),a=i([0,0],s,e(o,n(o,h(o,s,r.position)),M.K));v(t,new z(s,a),c(13016997))}}$t(t,s){if(p(t,s.v,s.v.color),s.v.lt&&s.v.dt&&s.v.wt){let h=[0,0];const n=i(h,s.v.position,e(h,s.v.dt,75*s.v.wt));((t,s,i,h)=>{x(t,s,i,h)})(t,s.v.position,n,c(13016997))}}kt(t,s){s.v.h&&x(t,s.v.position,s.v.h.position,c(15913899)),t.fillStyle=u(c(16512495),1),t.fillRect(8,8,100,48),t.fillStyle=u(c(2565956),1),t.fillText("FPS: "+this.Bt,12,20),t.fillText("TLC: "+s.v.tt,12,46),t.fillText(`SPP: ${s.v.ut}%`,12,33)}qt(t){const s=this.zt;s.drawImage(this.At,0,0),this.Rt(s,t),this.$t(s,t),this.kt(s,t),this.Lt.drawImage(this.zt.canvas,0,0)}}class A{constructor(){this.Ct=0,document.monetization&&("started"!==document.monetization.state&&"stopped"!==document.monetization.state?document.monetization.addEventListener("monetizationstart",this.Dt.bind(this)):this.Ct="started"===document.monetization.state)}Dt(){this.Ct=1}}var F={size:[1920,1080],Pt:[155,246],_t:[{position:[200,320],l:75,i:75},{position:[600,520],l:75,i:75},{position:[950,120],l:100,i:100,xt:0}]};const R=new class{constructor(){this.Ft=60,this.isActive=0,this.Et=0,this.Gt=0,this.Ot=0,this.Vt=0,this.Wt=document.getElementById(M.O),this.jt=new g(this.Wt),this.jt.once((()=>this.Ht=new AudioContext).bind(this)),this.Jt=new A,this.Tt=(t=>{for(var s=0,i=2166136261;t.length>s;s++)i=Math.imul(i^t.charCodeAt(s),16777619);i+=i<<13,i^=i>>>7,i+=i<<3,i^=i>>>17;let h=(i+=i<<5)>>>0,e=()=>(2**31-1&(h=Math.imul(48271,h)))/2**31;return e(),e})(M.seed),this.Kt=new T(this.Wt,this.Tt),window.addEventListener("focus",this.start.bind(this)),window.addEventListener("blur",this.stop.bind(this)),this.Nt(F)}Nt(t){this.currentState=L.St(this.jt,t),this.Qt=this.currentState}start(){void 0===this.Ut&&(this.Ut=requestAnimationFrame(this.Xt.bind(this)),this.isActive=1)}stop(){this.Ut&&cancelAnimationFrame(this.Ut),this.Ut=void 0,this.isActive=0}Yt(t){let s=.001*t;return this.Et=s-this.Ot,this.Ot=s,this.Gt+=this.Et,this.Ft=.9*this.Ft+1/this.Et*(1-.9),this.Kt.Ft=~~this.Ft,1>this.Gt||(this.Gt=0),s}Xt(t){if(this.Ut=requestAnimationFrame(this.Xt.bind(this)),t=this.Yt(t),1>=this.Et){for(this.currentState.v.rt(),this.Vt+=this.Et,this.Vt+=this.Et;this.Vt>=1/M.G;)this.Qt=this.currentState.clone(),this.currentState.step(1/M.G),this.Vt-=1/M.G,t+=this.Et;this.Kt.qt((s=this.Qt,((t,s)=>{let h=s.clone();return i(h.v.position,t.v.position,s.v.position),i(h.v.acceleration,t.v.acceleration,s.v.acceleration),i(h.v.u,t.v.u,s.v.u),h})(m(this.currentState,h=this.Vt/this.Et),m(s,1-h))))}var s,h}};class ${constructor(t,s){this.Zt=[];let i=t.captureStream();i&&(this.stream=i,this.ts=s||25e5,this.ss=document.createElement("video"),this.ss.style.display="none")}hs(){let t=["video/webm","video/webm,codecs=vp9","video/vp8","video/webm;codecs=vp8","video/webm;codecs=daala","video/webm;codecs=h264","video/mpeg"];for(let s in t)if(MediaRecorder.isTypeSupported(t[s])){this.es=t[s];break}let s={mimeType:this.es,videoBitsPerSecond:this.ts};this.Zt=[];try{this.ns=new MediaRecorder(this.stream,s)}catch(t){return}this.ns.onstop=this.os.bind(this),this.ns.ondataavailable=this.rs.bind(this),this.ns.start(100)}rs(t){t.data&&t.data.size>0&&this.Zt.push(t.data)}os(t){const s=new Blob(this.Zt,{type:this.es});this.ss.src=window.URL.createObjectURL(s)}cs(){this.ns.stop(),this.ss.controls=1}download(t){const s=t||"recording.webm",i=new Blob(this.Zt,{type:this.es}),h=window.URL.createObjectURL(i),e=document.createElement("a");e.style.display="none",e.href=h,e.download=s,document.body.appendChild(e),e.click(),setTimeout((()=>{document.body.removeChild(e),window.URL.revokeObjectURL(h)}),100)}}R.start();{const t=window;t.us=()=>new $(document.getElementById("g")),document.addEventListener("keypress",(s=>{"r"===s.key?R.Nt(F):"p"===s.key?R.isActive?R.stop():R.start():"o"===s.key?t.ls?t.ls&&(t.ls=0,t.ds.cs(),t.ds.download("IPTS-demo.webm"),delete t.ds):(t.ls=1,t.ds=t.us(),t.ds.hs()):"s"===s.key?M.J=1>M.J?1:.05:"b"===s.key&&R.currentState.yt.forEach((t=>{t.i=-10*t.i,t.acceleration=[0,0]}))}))}}();</script>