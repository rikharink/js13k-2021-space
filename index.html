<meta name=viewport content="width=device-width,initial-scale=1"><meta name=apple-mobile-web-app-capable content=yes><meta name=mobile-web-app-capable content=yes><title>InterPlanetary Transport System</title><style>*{font-family:sans-serif;margin:0}html{overflow:hidden}body{align-items:center;bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0}canvas{height:100%;image-rendering:-moz-crisp-edges;image-rendering:-webkit-crisp-edges;image-rendering:pixelated;image-rendering:crisp-edges;object-fit:contain;position:relative;width:100%}#bg{object-fit:cover;position:absolute;z-index:-1}</style><canvas id=g></canvas><script>!function(){function t(t,s){return t[0]=s[0],t[1]=s[1],t}function s(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t}function i(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t}function h(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t}function e(t,s){return t[0]=-s[0],t[1]=-s[1],t}function n(t,s){const i=s[0],h=s[1];let e=i*i+h*h;return e>0&&(e=1/Math.sqrt(e)),t[0]=s[0]*e,t[1]=s[1]*e,t}function r(t,s){const i=((t,s)=>{const i=s[0]-t[0],h=s[1]-t[1];return i*i+h*h})(s.position,t.position);return 0!==i?d*(s.t/i):0}function o(t,s){let i=t.clone();return h(i.i.position,i.i.position,s),h(i.i.acceleration,i.i.acceleration,s),h(i.i.h,i.i.h,s),i.o(),i}function c(t){return[(16711680&t)>>16,(65280&t)>>8,255&t]}function u(t,s){return`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${s})`}function l(t,s,i){t.fillStyle=u(i,1),t.beginPath(),t.arc(s.position[0],s.position[1],s.u,0,6.283185307179586),t.closePath(),t.fill()}class a{constructor(t){this.l=0,this.p=t,window.addEventListener("pointerdown",this.m.bind(this)),window.addEventListener("pointermove",this.m.bind(this)),window.addEventListener("pointerup",this.m.bind(this)),window.addEventListener("blur",this.g.bind(this))}g(){this.l=0}m(t){this.position=this._(this.p,[t.clientX,t.clientY]),this.l=!!t.buttons}_(t,s){let i=t.getBoundingClientRect();return[t.width/i.width*(s[0]-i.left),t.height/i.height*(s[1]-i.top)]}v(){return this.l}}const d=1;class x{constructor({width:t,height:s,i,M:h}){this.width=t,this.height=s,this.i=i,this.M=h}o(){let t,s=-1/0;for(let i of this.M){let h=r(this.i,i);s>h||(s=h,t=i)}return t}step(t){this.i.P(),this.F=this.o(),(t=>{((t,e)=>{const o=[0,0];h(e.i.acceleration,n(o,i(o,e.F.position,e.i.position)),r(e.i,e.F)),s(e.i.h,e.i.h,h(o,e.i.acceleration,t)),s(e.i.position,e.i.position,h(o,e.i.h,t))})(t,this)})(t),((t,e)=>{if(e.i.A(e.F)){let t=e.i.u,r=e.F.u;const o=[(e.i.position[0]*r+e.F.position[1]*t)/(t+r),(e.i.position[1]*r+e.F.position[1]*t)/(t+r)];let c=e.i,u=e.F,l=Math.sqrt(Math.pow(u.position[0]-o[0],2)+Math.pow(u.position[1]-o[1],2)),a=(u.position[0]-o[0])/l,d=(u.position[1]-o[1])/l,x=2*(c.h[0]*a+c.h[1]*d)/(c.t+u.t),w=c.h[0]-x*c.t*a-x*u.t*a,f=c.h[1]-x*c.t*d-x*u.t*d,p=[0,0];n(p,i(p,e.i.position,e.F.position)),h(p,p,e.i.u),s(c.position,c.position,p),c.h=h(c.h,[w,f],1)}})(0,this)}clone(){let t=new x({width:this.width,height:this.height,i:this.i.clone(),M:this.M.map((t=>t.clone()))});return t.F=this.F?.clone(),t}}class w{constructor(t){this.B=0,this.p=t,this.p.width=1280,this.p.height=720,this.I=this.p.getContext("2d")}set S(t){this.B=t}$(t,s){for(let i of s.M??[])l(t,i,i.color)}q(t,s){l(t,s.i,s.i.color)}T(t,s){s.F&&((t,s,i,h)=>{t.lineWidth=1,t.lineCap="round",t.strokeStyle=u(h,1),t.beginPath(),t.moveTo(s[0],s[1]),t.lineTo(i[0],i[1]),t.closePath(),t.stroke()})(t,s.i.position,s.F.position,c(15913899));let h=[0,0];n(h,e(h,i(h,s.i.position,s.F.position))),t.fillStyle=u(c(16512495),1),t.fillRect(10,10,45,13),t.fillStyle=u(c(2565956),1),t.fillText("FPS: "+this.B,12,20)}k(t){const s=this.I;s.clearRect(0,0,1280,720),this.$(s,t),this.q(s,t),this.T(s,t)}}class f{constructor(t,s,i=0){this.position=t,this.u=s,this.t=i}A(t){return((t,s)=>{const i=t.position[0]-s.position[0],h=t.position[1]-s.position[1],e=t.u+s.u;return e*e>i*i+h*h})(this,t)}C(t){const s=t[0]-this.position[0],i=t[1]-this.position[1];return this.u*this.u>s*s+i*i}}class p extends f{constructor(t,s,i,h){super(t,s,1e6*i),this.color=c(9137564),this.id=h??((t=Math.random)=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(s=>{let i=16*t()|0;return("x"==s?i:3&i|8).toString(16)})))()}clone(){return new p(t([0,0],this.position),this.u,this.t,this.id)}}class m extends f{constructor(t){super([10,10],5,1),this.color=c(13016997),this.h=[0,0],this.acceleration=[0,0],this.D=0,this.W=[0,0],this.j=t}P(){this.G()}G(){const t=this.j.v();!this.D&&t?this.H=this.j.position:this.D&&!t?this.H=void 0:this.j.position&&this.H&&e(this.W,n(this.W,i(this.W,this.j.position,this.H))),this.D=t}clone(){let s=new m(this.j);return s.position=t([0,0],this.position),s.h=t([0,0],this.h),s.acceleration=t([0,0],this.acceleration),s.D=this.D,s.W=t([0,0],this.W),s.H=this.H?t([0,0],this.H):void 0,s}}(new class{constructor(){this.S=60,this.J=0,this.K=0,this.L=0,this.N=0,this.O=(()=>{for(var t=0,s=2166136261;4>t;t++)s=Math.imul(s^"IPTS".charCodeAt(t),16777619);s+=s<<13,s^=s>>>7,s+=s<<3,s^=s>>>17;let i=(s+=s<<5)>>>0,h=()=>(2**31-1&(i=Math.imul(48271,i)))/2**31;return h(),h})(),this.R=document.getElementById("g"),document.body.appendChild(((t,s,i,h)=>{const e=document.createElement("canvas");e.id="bg",e.width=t,e.height=s;const n=e.getContext("2d"),r=[];for(;h>0;h--)r.push([i()*t,i()*s,1.2*i()]);n.fillStyle=u(c(2565956),1),n.fillRect(0,0,t,s);for(let t of r??[])n.beginPath(),n.arc(t[0],t[1],t[2],0,360),n.fillStyle=u(c(16512495),.8),n.fill();return e})(window.outerWidth,window.outerHeight,this.O,2e3)),this.U=new a(this.R),this.V=new w(this.R),this.X=new m(this.U),this.Y=new x({width:1280,height:720,i:this.X,M:[new p([640,360],75,75)]}),this.Z=this.Y.clone(),window.addEventListener("focus",this.start.bind(this)),window.addEventListener("blur",this.stop.bind(this))}start(){this.tt=requestAnimationFrame(this.st.bind(this))}stop(){this.tt&&cancelAnimationFrame(this.tt)}it(t){let s=.001*t;return this.J=s-this.L,this.L=s,this.K+=this.J,s}ht(t){this.L=t,this.K+=this.J,this.S=.9*this.S+1/this.J*(1-.9),this.V.S=~~this.S,1>this.K||(this.K=0)}st(t){if(this.tt=requestAnimationFrame(this.st.bind(this)),t=this.it(t),this.ht(t),1>=this.J){for(this.N+=this.J,this.N+=this.J;this.N>=1/164;)this.Z=this.Y.clone(),this.Y.step(1/164),this.N-=1/164,t+=this.J;this.V.k((i=this.Z,((t,i)=>{let h=i.clone();return s(h.i.position,t.i.position,i.i.position),s(h.i.acceleration,t.i.acceleration,i.i.acceleration),s(h.i.h,t.i.h,i.i.h),h.o(),h})(o(this.Y,h=this.N/this.J),o(i,1-h))))}var i,h}}).start()}();</script>