<meta name=monetization content=$ilp.uphold.com/g64DLNdpidDy><meta name=viewport content="width=device-width,initial-scale=1"><meta name=apple-mobile-web-app-capable content=yes><meta name=mobile-web-app-capable content=yes><title>InterPlanetary Transport System</title><style>*{font-family:sans-serif;margin:0}html{overflow:hidden}body{align-items:center;background:#000;bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0}canvas{height:100%;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:-webkit-crisp-edges;image-rendering:pixelated;image-rendering:crisp-edges;object-fit:contain;position:relative;width:100%}#bg{object-fit:cover;position:absolute;z-index:-1}</style><canvas id=g></canvas><script>!function(){function t(t,s){return t[0]=s[0],t[1]=s[1],t}function s(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t}function i(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t}function h(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t}function e(t,s){const i=s[0],h=s[1];let e=i*i+h*h;return e>0&&(e=1/Math.sqrt(e)),t[0]=s[0]*e,t[1]=s[1]*e,t}function n(t,s){const i=t.position[0]-s.position[0],h=t.position[1]-s.position[1],e=t.t+s.t;return e*e>i*i+h*h}function o(t){return[(16711680&t)>>16,(65280&t)>>8,255&t]}function r(t,s){return`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${s})`}function c(t,s){const i=((t,s)=>{const i=s[0]-t[0],h=s[1]-t[1];return i*i+h*h})(s.position,t.position);return 0!==i?w*(s.i/i):0}function d(t,s){let i=t.clone();return h(i.h.position,i.h.position,s),h(i.h.acceleration,i.h.acceleration,s),h(i.h.o,i.h.o,s),i.u(),i}function a(t,s,i){t.fillStyle=r(i,1),t.beginPath(),t.arc(s.position[0],s.position[1],s.t,0,6.283185307179586),t.closePath(),t.fill()}function u(t,s,i,h){t.lineWidth=1,t.lineCap="round",t.strokeStyle=r(h,1),t.beginPath(),t.moveTo(s[0],s[1]),t.lineTo(i[0],i[1]),t.closePath(),t.stroke()}class l{constructor(t){this.l=0,this.m=t,window.addEventListener("pointerdown",this.p.bind(this)),window.addEventListener("pointermove",this.p.bind(this)),window.addEventListener("pointerup",this.p.bind(this)),window.addEventListener("blur",this.v.bind(this))}v(){this.l=0}p(t){this.position=this.M(this.m,[t.clientX,t.clientY]),this.l=!!t.buttons}M(t,s){let i=t.getBoundingClientRect();return[t.width/i.width*(s[0]-i.left),t.height/i.height*(s[1]-i.top)]}g(){return this.l}}const w=1;class m{constructor(t,s,i=0,h=[0,0],e=[0,0]){this.position=t,this.t=s,this.i=i,this.o=h,this.acceleration=e}_(t){return n(this,t)}S(t){const s=t[0]-this.position[0],i=t[1]-this.position[1];return this.t*this.t>s*s+i*i}}class p extends m{constructor(s){super([10,10],5,0),this.color=o(13016997),this.P=.9,this.$=0,this.B=0,this.A=t([0,0],this.position),this.F=s}I(){this.T()}T(){const t=this.F.g();var s,n,o;!this.$&&t?(this.R=[0,0],this.k=this.F.position):this.$&&!t?(this.B++,h(this.o,this.R,1300*this.q),this.k=void 0,this.R=void 0,this.q=void 0):this.F.position&&this.k&&(n=this.R,o=e(this.R,i(this.R,this.F.position,this.k)),n[0]=-o[0],n[1]=-o[1],this.q=(s=((t,s)=>Math.hypot(s[0]-t[0],s[1]-t[1]))(this.k,this.F.position),Math.max(0,Math.min(100,s))/100)),this.$=t}clone(){let s=new p(this.F);return s.position=t([0,0],this.position),s.o=t([0,0],this.o),s.acceleration=t([0,0],this.acceleration),s.$=this.$,s.R=this.R?t([0,0],this.R):void 0,s.q=this.q,s.k=this.k?t([0,0],this.k):void 0,s}}class x extends m{constructor(t,s,i,h,e,n){super(t,s,1e6*i,e,n),this.color=o(9137564),this.id=h??((t=Math.random)=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(s=>{let i=16*t()|0;return("x"==s?i:3&i|8).toString(16)})))()}get D(){return w*this.i}L(t){return Math.sqrt(this.D/t)}clone(){return new x(t([0,0],this.position),this.t,this.i,this.id,this.o,this.acceleration)}}class f{constructor({size:t,h:s,V:i}){this.size=t,this.h=s,this.V=i}static C(s,i){let h=new p(s);return t(h.position,i.W),new f({size:i.size,h,V:i.j.map((t=>new x(t.position,t.t,t.i,t.id)))})}u(){let t,s=-1/0;for(let i of this.V){let h=c(this.h,i);s>h||(s=h,t=i)}return t}step(o){this.h.I(),this.G=this.u(),(n=>{((n,o)=>{const r=[0,0];t(o.h.A,o.h.position),h(o.h.acceleration,e(r,i(r,o.G.position,o.h.position)),c(o.h,o.G)),s(o.h.o,o.h.o,h(r,o.h.acceleration,n)),s(o.h.position,o.h.position,h(r,o.h.o,n))})(n,this)})(o),((s,i)=>{const e=i.h,o=i.G;if(n(e,o)){t(e.position,e.A);const s=[(e.position[0]*o.t+o.position[1]*e.t)/(e.t+o.t),(e.position[1]*o.t+o.position[1]*e.t)/(e.t+o.t)];let i=Math.sqrt(Math.pow(o.position[0]-s[0],2)+Math.pow(o.position[1]-s[1],2)),n=(o.position[0]-s[0])/i,r=(o.position[1]-s[1])/i,c=2*(e.o[0]*n+e.o[1]*r)/(e.i+o.i);e.o=h(e.o,[e.o[0]-c*e.i*n-c*o.i*n,e.o[1]-c*e.i*r-c*o.i*r],e.P)}})(0,this)}clone(){let s=new f({size:t([0,0],this.size),h:this.h.clone(),V:this.V.map((t=>t.clone()))});return s.G=this.G?.clone(),s}}class v{constructor(t,s){this.H=0,this.m=t,this.J=document.createElement("canvas").getContext("2d"),this.K(),this.N=this.m.getContext("2d"),this.O=s,this.U=((t,s,i,h)=>{const e=document.createElement("canvas");e.id="bg",e.width=t,e.height=750;const n=e.getContext("2d"),c=[];for(;h>0;h--)c.push([i()*t,750*i(),1.2*i()]);n.fillStyle=r(o(2565956),1),n.fillRect(0,0,t,750);for(let t of c??[])n.beginPath(),n.arc(t[0],t[1],t[2],0,360),n.fillStyle=r(o(16512495),.8),n.fill();return e})(1334,0,this.O,2e3)}set X(t){this.H=t}K(){this.m.width=1334,this.m.height=750,this.J.canvas.width=1334,this.J.canvas.height=750}Y(t,s){for(let i of s.V??[])a(t,i,i.color)}Z(t,i){if(a(t,i.h,i.h.color),i.h.R&&i.h.q){let e=[0,0],n=s(e,i.h.position,h(e,i.h.R,75*i.h.q));u(t,i.h.position,n,o(13016997))}}tt(t,s){s.G&&u(t,s.h.position,s.G.position,o(15913899)),t.fillStyle=r(o(16512495),1),t.fillRect(8,8,100,48),t.fillStyle=r(o(2565956),1),t.fillText("FPS: "+this.H,12,20),t.fillText(`V: [${~~s.h.o[0]}, ${~~s.h.o[1]}]`,12,33),t.fillText(`A: [${~~s.h.acceleration[0]}, ${~~s.h.acceleration[1]}]`,12,46)}st(t){const s=this.J;s.drawImage(this.U,0,0),this.Y(s,t),this.Z(s,t),this.tt(s,t),this.N.drawImage(this.J.canvas,0,0)}}class b{constructor(){this.it=0,document.monetization&&("started"!==document.monetization.state&&"stopped"!==document.monetization.state?document.monetization.addEventListener("monetizationstart",this.ht.bind(this)):this.it="started"===document.monetization.state)}ht(){this.it=1}}var M={size:[1920,1080],W:[155,246],j:[{position:[200,320],t:75,i:75},{position:[600,520],t:75,i:75},{position:[950,120],t:100,i:100}]};const y=new class{constructor(){this.X=60,this.isActive=0,this.et=0,this.nt=0,this.ot=0,this.rt=0,this.ct=document.getElementById("g"),this.dt=new l(this.ct),this.at=new b,this.O=(()=>{for(var t=0,s=2166136261;4>t;t++)s=Math.imul(s^"IPTS".charCodeAt(t),16777619);s+=s<<13,s^=s>>>7,s+=s<<3,s^=s>>>17;let i=(s+=s<<5)>>>0,h=()=>(2**31-1&(i=Math.imul(48271,i)))/2**31;return h(),h})(),this.ut=new v(this.ct,this.O),window.addEventListener("focus",this.start.bind(this)),window.addEventListener("blur",this.stop.bind(this)),this.lt(M)}lt(t){this.wt=f.C(this.dt,t)}start(){this.xt=requestAnimationFrame(this.ft.bind(this)),this.isActive=1}stop(){this.xt&&cancelAnimationFrame(this.xt),this.isActive=0}vt(t){let s=.001*t;return this.et=s-this.ot,this.ot=s,this.nt+=this.et,s}bt(t){this.ot=t,this.nt+=this.et,this.X=.9*this.X+1/this.et*(1-.9),this.ut.X=~~this.X,1>this.nt||(this.nt=0)}ft(t){if(this.xt=requestAnimationFrame(this.ft.bind(this)),t=this.vt(t),this.bt(t),1>=this.et){for(this.rt+=this.et,this.rt+=this.et;this.rt>=1/164;)this.Mt=this.wt.clone(),this.wt.step(1/164),this.rt-=1/164,t+=this.et;this.ut.st((i=this.Mt,((t,i)=>{let h=i.clone();return s(h.h.position,t.h.position,i.h.position),s(h.h.acceleration,t.h.acceleration,i.h.acceleration),s(h.h.o,t.h.o,i.h.o),h.u(),h})(d(this.wt,h=this.rt/this.et),d(i,1-h))))}var i,h}};class g{constructor(t,s){this.yt=[];let i=t.captureStream();i&&(this.stream=i,this.gt=s||25e5,this._t=document.createElement("video"),this._t.style.display="none")}St(){let t=["video/webm","video/webm,codecs=vp9","video/vp8","video/webm;codecs=vp8","video/webm;codecs=daala","video/webm;codecs=h264","video/mpeg"];for(let s in t)if(MediaRecorder.isTypeSupported(t[s])){this.Pt=t[s];break}let s={mimeType:this.Pt,videoBitsPerSecond:this.gt};this.yt=[];try{this.$t=new MediaRecorder(this.stream,s)}catch(t){return}this.$t.onstop=this.zt.bind(this),this.$t.ondataavailable=this.Bt.bind(this),this.$t.start(100)}Bt(t){t.data&&t.data.size>0&&this.yt.push(t.data)}zt(t){const s=new Blob(this.yt,{type:this.Pt});this._t.src=window.URL.createObjectURL(s)}At(){this.$t.stop(),this._t.controls=1}download(t){const s=t||"recording.webm",i=new Blob(this.yt,{type:this.Pt}),h=window.URL.createObjectURL(i),e=document.createElement("a");e.style.display="none",e.href=h,e.download=s,document.body.appendChild(e),e.click(),setTimeout((()=>{document.body.removeChild(e),window.URL.revokeObjectURL(h)}),100)}}y.start();{const t=window;t.Ft=()=>new g(document.getElementById("g")),document.addEventListener("keypress",(s=>{"r"===s.key?y.lt(M):"p"===s.key?y.isActive?y.stop():y.start():"o"===s.key&&(t.It?t.It&&(t.It=0,t.Tt.At(),t.Tt.download("IPTS-demo.webm"),delete t.Tt):(t.It=1,t.Tt=t.Ft(),t.Tt.St()))}))}}();</script>