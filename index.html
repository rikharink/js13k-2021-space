<meta name=viewport content="width=device-width,initial-scale=1"><meta name=apple-mobile-web-app-capable content=yes><meta name=mobile-web-app-capable content=yes><title>InterPlanetary Transport System</title><style>*{font-family:sans-serif;margin:0}html{overflow:hidden}body{align-items:center;bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0}canvas{height:100%;image-rendering:-moz-crisp-edges;image-rendering:-webkit-crisp-edges;image-rendering:pixelated;image-rendering:crisp-edges;object-fit:contain;position:relative;width:100%}#bg{object-fit:cover;position:absolute;z-index:-1}</style><canvas id=g></canvas><script>!function(){function t(t,s){return t[0]=s[0],t[1]=s[1],t}function s(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t}function i(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t}function h(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t}function n(t,s){return t[0]=-s[0],t[1]=-s[1],t}function e(t,s){const i=s[0],h=s[1];let n=i*i+h*h;return n>0&&(n=1/Math.sqrt(n)),t[0]=s[0]*n,t[1]=s[1]*n,t}function r(t,s){const i=((t,s)=>{const i=s[0]-t[0],h=s[1]-t[1];return i*i+h*h})(s.position,t.position);return 0!==i?x*(s.t/i):0}function o(t,s){const i=t.position[0]-s.position[0],h=t.position[1]-s.position[1],n=t.i+s.i;return n*n>i*i+h*h}function c(t,s){let i=t.clone();return h(i.h.position,i.h.position,s),h(i.h.acceleration,i.h.acceleration,s),h(i.h.o,i.h.o,s),i.u(),i}function u(t){return[(16711680&t)>>16,(65280&t)>>8,255&t]}function l(t,s){return`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${s})`}function a(t,s,i){t.fillStyle=l(i,1),t.beginPath(),t.arc(s.position[0],s.position[1],s.i,0,6.283185307179586),t.closePath(),t.fill()}class d{constructor(t){this.l=0,this.p=t,window.addEventListener("pointerdown",this.m.bind(this)),window.addEventListener("pointermove",this.m.bind(this)),window.addEventListener("pointerup",this.m.bind(this)),window.addEventListener("blur",this.g.bind(this))}g(){this.l=0}m(t){this.position=this._(this.p,[t.clientX,t.clientY]),this.l=!!t.buttons}_(t,s){let i=t.getBoundingClientRect();return[t.width/i.width*(s[0]-i.left),t.height/i.height*(s[1]-i.top)]}v(){return this.l}}const x=1;class w{constructor({width:t,height:s,h:i,M:h}){this.width=t,this.height=s,this.h=i,this.M=h}u(){let t,s=-1/0;for(let i of this.M){let h=r(this.h,i);s>h||(s=h,t=i)}return t}step(n){this.h.P(),this.F=this.u(),(n=>{((n,o)=>{const c=[0,0];t(o.h.A,o.h.position),h(o.h.acceleration,e(c,i(c,o.F.position,o.h.position)),r(o.h,o.F)),s(o.h.o,o.h.o,h(c,o.h.acceleration,n)),s(o.h.position,o.h.position,h(c,o.h.o,n))})(n,this)})(n),((s,i)=>{const n=i.h,e=i.F;if(o(n,e)){t(n.position,n.A);const s=[(n.position[0]*e.i+e.position[1]*n.i)/(n.i+e.i),(n.position[1]*e.i+e.position[1]*n.i)/(n.i+e.i)];let i=Math.sqrt(Math.pow(e.position[0]-s[0],2)+Math.pow(e.position[1]-s[1],2)),r=(e.position[0]-s[0])/i,o=(e.position[1]-s[1])/i,c=2*(n.o[0]*r+n.o[1]*o)/(n.t+e.t);n.o=h(n.o,[n.o[0]-c*n.t*r-c*e.t*r,n.o[1]-c*n.t*o-c*e.t*o],n.B)}})(0,this)}clone(){let t=new w({width:this.width,height:this.height,h:this.h.clone(),M:this.M.map((t=>t.clone()))});return t.F=this.F?.clone(),t}}class f{constructor(t){this.I=0,this.p=t,this.p.width=1280,this.p.height=720,this.S=this.p.getContext("2d")}set $(t){this.I=t}q(t,s){for(let i of s.M??[])a(t,i,i.color)}T(t,s){a(t,s.h,s.h.color)}k(t,s){s.F&&((t,s,i,h)=>{t.lineWidth=1,t.lineCap="round",t.strokeStyle=l(h,1),t.beginPath(),t.moveTo(s[0],s[1]),t.lineTo(i[0],i[1]),t.closePath(),t.stroke()})(t,s.h.position,s.F.position,u(15913899));let h=[0,0];e(h,n(h,i(h,s.h.position,s.F.position))),t.fillStyle=l(u(16512495),1),t.fillRect(10,10,45,13),t.fillStyle=l(u(2565956),1),t.fillText("FPS: "+this.I,12,20)}C(t){const s=this.S;s.clearRect(0,0,1280,720),this.q(s,t),this.T(s,t),this.k(s,t)}}class p{constructor(t,s,i=0){this.position=t,this.i=s,this.t=i}D(t){return o(this,t)}W(t){const s=t[0]-this.position[0],i=t[1]-this.position[1];return this.i*this.i>s*s+i*i}}class m extends p{constructor(t,s,i,h){super(t,s,1e6*i),this.color=u(9137564),this.id=h??((t=Math.random)=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(s=>{let i=16*t()|0;return("x"==s?i:3&i|8).toString(16)})))()}clone(){return new m(t([0,0],this.position),this.i,this.t,this.id)}}class g extends p{constructor(s){super([10,10],5,0),this.color=u(13016997),this.B=.9,this.o=[0,0],this.acceleration=[0,0],this.j=0,this.G=[0,0],this.A=t([0,0],this.position),this.H=s}P(){this.J()}J(){const t=this.H.v();!this.j&&t?this.K=this.H.position:this.j&&!t?this.K=void 0:this.H.position&&this.K&&n(this.G,e(this.G,i(this.G,this.H.position,this.K))),this.j=t}clone(){let s=new g(this.H);return s.position=t([0,0],this.position),s.o=t([0,0],this.o),s.acceleration=t([0,0],this.acceleration),s.j=this.j,s.G=t([0,0],this.G),s.K=this.K?t([0,0],this.K):void 0,s}}(new class{constructor(){this.$=60,this.L=0,this.N=0,this.O=0,this.R=0,this.U=(()=>{for(var t=0,s=2166136261;4>t;t++)s=Math.imul(s^"IPTS".charCodeAt(t),16777619);s+=s<<13,s^=s>>>7,s+=s<<3,s^=s>>>17;let i=(s+=s<<5)>>>0,h=()=>(2**31-1&(i=Math.imul(48271,i)))/2**31;return h(),h})(),this.V=document.getElementById("g"),document.body.appendChild(((t,s,i,h)=>{const n=document.createElement("canvas");n.id="bg",n.width=t,n.height=s;const e=n.getContext("2d"),r=[];for(;h>0;h--)r.push([i()*t,i()*s,1.2*i()]);e.fillStyle=l(u(2565956),1),e.fillRect(0,0,t,s);for(let t of r??[])e.beginPath(),e.arc(t[0],t[1],t[2],0,360),e.fillStyle=l(u(16512495),.8),e.fill();return n})(window.outerWidth,window.outerHeight,this.U,2e3)),this.X=new d(this.V),this.Y=new f(this.V),this.Z=new g(this.X),this.tt=new w({width:1280,height:720,h:this.Z,M:[new m([640,360],75,75)]}),this.st=this.tt.clone(),window.addEventListener("focus",this.start.bind(this)),window.addEventListener("blur",this.stop.bind(this))}start(){this.it=requestAnimationFrame(this.ht.bind(this))}stop(){this.it&&cancelAnimationFrame(this.it)}nt(t){let s=.001*t;return this.L=s-this.O,this.O=s,this.N+=this.L,s}et(t){this.O=t,this.N+=this.L,this.$=.9*this.$+1/this.L*(1-.9),this.Y.$=~~this.$,1>this.N||(this.N=0)}ht(t){if(this.it=requestAnimationFrame(this.ht.bind(this)),t=this.nt(t),this.et(t),1>=this.L){for(this.R+=this.L,this.R+=this.L;this.R>=1/164;)this.st=this.tt.clone(),this.tt.step(1/164),this.R-=1/164,t+=this.L;this.Y.C((i=this.st,((t,i)=>{let h=i.clone();return s(h.h.position,t.h.position,i.h.position),s(h.h.acceleration,t.h.acceleration,i.h.acceleration),s(h.h.o,t.h.o,i.h.o),h.u(),h})(c(this.tt,h=this.R/this.L),c(i,1-h))))}var i,h}}).start()}();</script>