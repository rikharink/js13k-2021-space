!function(){function t(t,s,i=1e-5){let h;return t===s?1:(h=Math.abs(t-s),0===t||0===s||v>h?i*v>h:i>h/(Math.abs(t)+Math.abs(s)))}function s(t,s){if(s)return t[0]=s[0],t[1]=s[1],t}function i(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t}function h(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t}function e(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t}function n(t,s){const i=s[0],h=s[1];let e=i*i+h*h;return e>0&&(e=1/Math.sqrt(e)),t[0]=s[0]*e,t[1]=s[1]*e,t}function o(t,s){return Math.hypot(s[0]-t[0],s[1]-t[1])}function r(t,s){const i=t.position[0]-s.position[0],h=t.position[1]-s.position[1],e=t.t+s.t;return e*e>i*i+h*h}function c(t){return[(16711680&t)>>16,(65280&t)>>8,255&t]}function a(t=Math.random){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(s=>{let i=16*t()|0;return("x"==s?i:3&i|8).toString(16)}))}function u(t,s){return`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${s})`}function d(t,s){const i=((t,s)=>{const i=s[0]-t[0],h=s[1]-t[1];return i*i+h*h})(s.position,t.position);return 0!==i?x.i*(s.h/i):0}function l(t,o){if(!t.o||!t.acceleration)return;const r=[0,0];s(t.u,t.position),e(t.acceleration,n(r,h(r,t.o.position,t.position)),d(t,t.o)),t.l||(t.l=[0,0]),i(t.l,t.l,e(r,t.acceleration,o)),i(t.position,t.position,e(r,t.l,o))}function f(t,s){let i=t.clone();return e(i.m.position,i.m.position,s),e(i.m.acceleration,i.m.acceleration,s),e(i.m.l,i.m.l,s),i}function w(t,s,i){t.fillStyle=u(i,1),t.beginPath(),t.arc(s.position[0],s.position[1],s.t,0,6.283185307179586),t.closePath(),t.fill()}function m(t,s,i,h){t.lineWidth=1,t.lineCap="round",t.strokeStyle=u(h,1),t.beginPath(),t.moveTo(s[0],s[1]),t.lineTo(i[0],i[1]),t.closePath(),t.stroke()}class p{constructor(t){this.p=0,this.v=t,window.addEventListener("pointerdown",this.g.bind(this)),window.addEventListener("pointermove",this.g.bind(this)),window.addEventListener("pointerup",this.g.bind(this)),window.addEventListener("blur",this.M.bind(this))}M(){this.p=0}g(t){this.position=this.S(this.v,[t.clientX,t.clientY]),this.p=!!t.buttons}S(t,s){let i=t.getBoundingClientRect();return[t.width/i.width*(s[0]-i.left),t.height/i.height*(s[1]-i.top)]}_(){return this.p}}const x={B:[1334,750],P:164,F:"g",seed:"IPTS",I:1e6,i:1,L:2e3,T:0,k:1300,A:1},v=Math.pow(2,-1022);class b{constructor(t,i,h=0,e,n,o=.8){this.u=[0,0],this.position=t,s(this.u,this.position),this.t=i,this.h=h,this.l=e,this.acceleration=n,this.R=o}$(t){return r(this,t)}q(t){const s=t[0]-this.position[0],i=t[1]-this.position[1];return this.t*this.t>s*s+i*i}clone(){return new b(s([0,0],this.position),this.t,this.h,s([0,0],this.l),s([0,0],this.acceleration),this.R)}}class g extends b{constructor(t,s){super([10,10],5,x.T,[0,0],[0,0]),this.color=c(13016997),this.C=0,this.D=0,this.W=0,this.G=0,this.id=s??a(),this.O=t}V(){this.j(),this.H&&this.G++,this.G>30&&(this.G=0,this.D=0)}get H(){return!(!t((s=this.position)[0],(i=this.u)[0],h)||!t(s[1],i[1],h));var s,i,h}get J(){return 2>this.D}j(){if(!this.J)return void(x.A=1);const t=this.O._();var s,i,r;!this.C&&t?(this.K=[0,0],this.N=this.O.position,1>this.D||(x.A=.1)):this.C&&!t?(e(this.l,this.K,x.k*this.U),this.N=void 0,this.K=void 0,this.U=void 0,this.D++,this.W++,x.A=1):this.O.position&&this.N&&(i=this.K,r=n(this.K,h(this.K,this.O.position,this.N)),i[0]=-r[0],i[1]=-r[1],this.U=(s=o(this.N,this.O.position),Math.max(0,Math.min(100,s))/100)),this.C=t}clone(){let t=new g(this.O);return t.id=this.id,t.o=this.o?.clone(),t.position=s([0,0],this.position),t.u=s([0,0],this.u),t.l=s([0,0],this.l),t.acceleration=s([0,0],this.acceleration),t.C=this.C,t.K=s([0,0],this.K),t.U=this.U,t.W=this.W,t.D=this.D,t.N=s([0,0],this.N),t}}class M extends b{constructor(t,s,i,h,e,n,o){super(t,s,i*x.I,e,n,o),this.color=c(9137564),this.id=h??a()}get X(){return x.i*this.h}Y(t){return Math.sqrt(this.X/t)}clone(){let t=new M(s([0,0],this.position),this.t,this.h,this.id,this.l,this.acceleration);return t.o=this.o,t}}class y{constructor({size:t,m:s,Z:i}){this.size=t,this.m=s,this.Z=i}static tt(t,i){let h=new g(t);return s(h.position,i.st),new y({size:i.size,m:h,Z:i.it.map((t=>new M(s([0,0],t.position),t.t,t.h,t.id,s([0,0],t.l),s([0,0],t.acceleration),t.R)))})}step(t){this.m.V(),((t,s)=>{(t=>{let s,i,h,e=[t.m,...t.Z];for(i of e){let e=-1/0;for(h of t.Z){if(i===h)continue;let t=d(i,h);e>t||(e=t,s=h)}i.o=s}})(s);let i=[s.m,...s.Z];for(let s of i)l(s,t*x.A)})(t,this),((t,i)=>{let n=[0,0],c=[i.m,...i.Z];for(let t of c)for(let i of c)if(t!==i&&r(t,i)){s(t.position,t.u);const r=[(t.position[0]*i.t+i.position[1]*t.t)/(t.t+i.t),(t.position[1]*i.t+i.position[1]*t.t)/(t.t+i.t)];let c=[0,0];e(c,h(n,i.position,r),1/o(r,i.position));let a=2*(t.l[0]*c[0]+t.l[1]*c[1])/(t.h+i.h);t.l=e(t.l,[t.l[0]-a*t.h*c[0]-a*i.h*c[0],t.l[1]-a*t.h*c[1]-a*i.h*c[1]],i.R)}})(0,this)}clone(){return new y({size:s([0,0],this.size),m:this.m.clone(),Z:this.Z.map((t=>t.clone()))})}}class S{constructor(t,s){this.ht=0,this.v=t,this.et=document.createElement("canvas").getContext("2d"),this.nt(),this.ot=this.v.getContext("2d"),this.rt=s,this.ct=((t,s,i,h)=>{const e=document.createElement("canvas");e.id="bg",e.width=t,e.height=s;const n=e.getContext("2d"),o=[];for(;h>0;h--)o.push([i()*t,i()*s,1.2*i()]);n.fillStyle=u(c(2565956),1),n.fillRect(0,0,t,s);for(let t of o??[])n.beginPath(),n.arc(t[0],t[1],t[2],0,360),n.fillStyle=u(c(16512495),.8),n.fill();return e})(x.B[0],x.B[1],this.rt,x.L)}set at(t){this.ht=t}nt(){this.v.width=x.B[0],this.v.height=x.B[1],this.et.canvas.width=x.B[0],this.et.canvas.height=x.B[1]}ut(t,s){for(let i of s.Z??[])w(t,i,i.color)}dt(t,s){if(w(t,s.m,s.m.color),s.m.K&&s.m.U&&s.m.J){let h=[0,0],n=i(h,s.m.position,e(h,s.m.K,75*s.m.U));m(t,s.m.position,n,c(13016997))}}lt(t,s){s.m.o&&m(t,s.m.position,s.m.o.position,c(15913899)),t.fillStyle=u(c(16512495),1),t.fillRect(8,8,100,48),t.fillStyle=u(c(2565956),1),t.fillText("FPS: "+this.ht,12,20),t.fillText("L: "+s.m.W,12,46),t.fillText("LC: "+s.m.D,12,33)}ft(t){const s=this.et;s.drawImage(this.ct,0,0),this.ut(s,t),this.dt(s,t),this.lt(s,t),this.ot.drawImage(this.et.canvas,0,0)}}class _{constructor(){this.wt=0,document.monetization&&("started"!==document.monetization.state&&"stopped"!==document.monetization.state?document.monetization.addEventListener("monetizationstart",this.xt.bind(this)):this.wt="started"===document.monetization.state)}xt(){this.wt=1}}var B={size:[1920,1080],st:[155,246],it:[{position:[200,320],t:75,h:75},{position:[600,520],t:75,h:75},{position:[950,120],t:100,h:100}]};const P=new class{constructor(){this.at=60,this.isActive=0,this.vt=0,this.bt=0,this.gt=0,this.Mt=0,this.yt=document.getElementById(x.F),this.St=new p(this.yt),this._t=new _,this.rt=(t=>{for(var s=0,i=2166136261;t.length>s;s++)i=Math.imul(i^t.charCodeAt(s),16777619);i+=i<<13,i^=i>>>7,i+=i<<3,i^=i>>>17;let h=(i+=i<<5)>>>0,e=()=>(2**31-1&(h=Math.imul(48271,h)))/2**31;return e(),e})(x.seed),this.Bt=new S(this.yt,this.rt),window.addEventListener("focus",this.start.bind(this)),window.addEventListener("blur",this.stop.bind(this)),this.Pt(B)}Pt(t){this.currentState=y.tt(this.St,t),this.zt=this.currentState}start(){this.Ft=requestAnimationFrame(this.It.bind(this)),this.isActive=1}stop(){this.Ft&&cancelAnimationFrame(this.Ft),this.isActive=0}Lt(t){let s=.001*t;return this.vt=s-this.gt,this.gt=s,this.bt+=this.vt,s}Tt(t){this.gt=t,this.bt+=this.vt,this.at=.9*this.at+1/this.vt*(1-.9),this.Bt.at=~~this.at,1>this.bt||(this.bt=0)}It(t){if(this.Ft=requestAnimationFrame(this.It.bind(this)),t=this.Lt(t),this.Tt(t),1>=this.vt){for(this.Mt+=this.vt,this.Mt+=this.vt;this.Mt>=1/x.P;)this.zt=this.currentState.clone(),this.currentState.step(1/x.P),this.Mt-=1/x.P,t+=this.vt;this.Bt.ft((s=this.zt,((t,s)=>{let h=s.clone();return i(h.m.position,t.m.position,s.m.position),i(h.m.acceleration,t.m.acceleration,s.m.acceleration),i(h.m.l,t.m.l,s.m.l),h})(f(this.currentState,h=this.Mt/this.vt),f(s,1-h))))}var s,h}};class z{constructor(t,s){this.kt=[];let i=t.captureStream();i&&(this.stream=i,this.At=s||25e5,this.Rt=document.createElement("video"),this.Rt.style.display="none")}$t(){let t=["video/webm","video/webm,codecs=vp9","video/vp8","video/webm;codecs=vp8","video/webm;codecs=daala","video/webm;codecs=h264","video/mpeg"];for(let s in t)if(MediaRecorder.isTypeSupported(t[s])){this.qt=t[s];break}let s={mimeType:this.qt,videoBitsPerSecond:this.At};this.kt=[];try{this.Ct=new MediaRecorder(this.stream,s)}catch(t){return}this.Ct.onstop=this.Dt.bind(this),this.Ct.ondataavailable=this.Wt.bind(this),this.Ct.start(100)}Wt(t){t.data&&t.data.size>0&&this.kt.push(t.data)}Dt(t){const s=new Blob(this.kt,{type:this.qt});this.Rt.src=window.URL.createObjectURL(s)}Et(){this.Ct.stop(),this.Rt.controls=1}download(t){const s=t||"recording.webm",i=new Blob(this.kt,{type:this.qt}),h=window.URL.createObjectURL(i),e=document.createElement("a");e.style.display="none",e.href=h,e.download=s,document.body.appendChild(e),e.click(),setTimeout((()=>{document.body.removeChild(e),window.URL.revokeObjectURL(h)}),100)}}P.start();{const t=window;t.Gt=()=>new z(document.getElementById("g")),document.addEventListener("keypress",(s=>{"r"===s.key?P.Pt(B):"p"===s.key?P.isActive?P.stop():P.start():"o"===s.key?t.Ot?t.Ot&&(t.Ot=0,t.Vt.Et(),t.Vt.download("IPTS-demo.webm"),delete t.Vt):(t.Ot=1,t.Vt=t.Gt(),t.Vt.$t()):"s"===s.key?x.A=1>x.A?1:.05:"b"===s.key&&P.currentState.Z.forEach((t=>t.acceleration=[0,0]))}))}}();
//# sourceMappingURL=bundle.js.map
