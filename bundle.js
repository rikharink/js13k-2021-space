!function(){function t(t,s,i){return t+i*(s-t)}function s(t,s,i){let h;return i=i??1e-5,t===s?1:(h=Math.abs(t-s),0===t||0===s||B>h?i*B>h:i>h/(Math.abs(t)+Math.abs(s)))}function i(t,s){if(s)return t[0]=s[0],t[1]=s[1],t}function h(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t}function e(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t}function n(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t}function r(t,s){const i=s[0],h=s[1];let e=i*i+h*h;return e>0&&(e=1/Math.sqrt(e)),t[0]=s[0]*e,t[1]=s[1]*e,t}function o(t,s){return t[0]*s[0]+t[1]*s[1]}function a(t,s){return Math.hypot(s[0]-t[0],s[1]-t[1])}function c(t,s){const i=s[0]-t[0],h=s[1]-t[1];return i*i+h*h}function u(t,s,i=1){return t[0]=s[1],t[1]=s[0],i?t[1]=-t[1]:t[0]=-t[0],r(t,t)}function l(t){return[(16711680&t)>>16,(65280&t)>>8,255&t]}function f(t){const s=t.t;let i=[0,0];const o=t.i(s),a=h([0,0],o,n(i,r(i,e(i,o,t.position)),H.h)),c=u([0,0],e(i,o,a));n(c,c,H.o);const l=h([0,0],a,c),f=new D(o,l);return new q(f.u,[H.h/2,H.o/2],s)}function d(t,s){let i=Math.sin(s),h=Math.cos(s);return t[0]=h,t[1]=i,t[2]=-i,t[3]=h,t[4]=0,t[5]=0,t}function w(t,s,i){let h=s[0],e=s[1];return t[0]=i[0]*h+i[2]*e+i[4],t[1]=i[1]*h+i[3]*e+i[5],t}function p(t,s){const i=c(t.position,s.position),h=t.l+s.l;return h*h>i}function x(t,s){const[i,h]=t.position,[e,n]=s.position,[r,o]=s.size;let a=i,c=h;e>i?a=e:i>e+r&&(a=e+r),n>h?c=n:h>n+o&&(c=n+o);let u=new D([i,h],[a,c]);return t.l*t.l>=u.p}function M(t,s,a){if(t===s)return 0;if(!t.M)return 0;if(p(t,s)){if(a)return 1;let c=[0,0];const u=r([0,0],e(c,t.position,s.position));i(t.position,h([0,0],s.position,n(c,u,t.l+s.l)));const l=o(u,e([0,0],s.M??[0,0],t.M));if(l>=0){const e=n([0,0],u,2*l/(t.m=s.m));i(t.M,n([0,0],h(c,t.M,n(c,e,s.m)),s.g))}return 1}return 0}function m(t,s){return t.S?0:((t,s)=>{const i=e([0,0],t.position,s.position),r=[1,0,0,1,0,0];return d(r,-s.orientation),w(i,i,r),x(new F(h([0,0],i,s.T),t.l),new J([0,0],n([0,0],s.T,2)))})(t,s)?(t.M=[0,0],1):0}function g(t,s){const i=c(t.position,s.position);return 0!==i?H.P*(s.m/i):0}function S(t,s){let i,h,e;for(h of t){let t=-1/0;for(e of s.R){if(h===e)continue;let s=g(h,e);t>s||(t=s,i=e)}h.A&&void 0!==h.L||(h.L=i)}}function v(t,s){if(!t.L||!t.acceleration)return;const o=[0,0];i(t._,t.position),n(t.acceleration,r(o,e(o,t.L.position,t.position)),g(t,t.L)),t.M||(t.M=[0,0]),h(t.M,t.M,n(o,t.acceleration,s)),h(t.position,t.position,n(o,t.M,s))}function b(t,s){let i=t.clone();return n(i.k.position,i.k.position,s),n(i.k.acceleration,i.k.acceleration,s),n(i.k.M,i.k.M,s),i}function T(t,s,i){[t[i],t[s]]=[t[s],t[i]]}function P(t){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(s=>{let i=16*t.random()|0;return("x"==s?i:3&i|8).toString(16)}))}function R(t,s){return`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${s})`}function A(t,s,i,h=1){t.fillStyle=R(i,h),t.beginPath(),t.arc(s.position[0],s.position[1],s.l,0,$),t.closePath(),t.fill()}function L(t,s,i,h=1){t.lineWidth=h,t.lineCap="round",t.strokeStyle=R(i,1),t.beginPath(),t.moveTo(s.start[0],s.start[1]),t.lineTo(s.end[0],s.end[1]),t.closePath(),t.stroke()}function y(t,s,i,o,a){if(0===H.h)return;L(t,i,a);let c=[0,0];t.save(),t.font="bold 16px sans-serif",t.fillStyle="black",t.textAlign="center",t.textBaseline="middle";const f=t.measureText(s=`  ${s}  `);t.restore(),i.I(-H.o);let d=i.u,w=u([0,0],r(c,e(c,i.start,i.end))),p=h([0,0],d,n(c,w,H.o/1.5+f.width)),x=h([0,0],i.start,n(c,w,f.width)),M=h([0,0],i.end,n(c,w,f.width));t.fillStyle=R(l(15913899),1),t.beginPath(),t.moveTo(i.start[0],i.start[1]),t.lineTo(x[0],x[1]),t.lineTo(p[0],p[1]),t.lineTo(M[0],M[1]),t.lineTo(i.end[0],i.end[1]),t.closePath(),t.fill(),t.save();const m=new D(d,new D(x,M).u).u;t.translate(m[0],m[1]),t.rotate(.5*Math.PI+o),t.translate(-m[0],-m[1]),t.font="bold 18px sans-serif",t.fillStyle="black",t.textAlign="center",t.textBaseline="middle",t.fillText(s,m[0],m[1]),t.restore()}function _(t,s,i,h,{C:e,background:n,text:r}){t.font="normal 12px sans-serif",t.fillStyle=R(n,1),t.fillRect(h[0],h[1],100,20),t.fillStyle=R(e,1),t.fillRect(h[0],h[1],s,20),t.fillStyle=R(r,1),t.strokeStyle="black",t.lineWidth=2,t.strokeText(i,h[0]+108,h[1]+14),t.fillText(i,h[0]+108,h[1]+14)}function E(t){let s=t.G(55,100);return{id:P(t),position:[0,0],l:s,O:[],N:0,$:0,g:.8}}function k(t,s,i){const o=E(t);o.l=t.B(20,35),o.$=1;const a=r([0,0],e([0,0],o.position,i.position));return n(a,a,i.l+6*o.l),o.position=h([0,0],a,i.position),o}function I(t,s){let i=s.filter((s=>s.id!==t.id));return((t,s)=>{const i=new F(t.position,t.l);for(let t of s)if(p(i,new F(t.position,t.l)))return 1;return 0})(t,i)||((t,s)=>{let i=3*t.l;for(let h of s)if(i>a(t.position,h.position)-h.l)return 1;return 0})(t,i)}function C(t,s,i){s.position=[t.B(i.position[0],i.size[0]),t.B(i.position[1],i.size[1])]}function G(t,s,i,h){const e=a(t.position,s.position)+2*t.l,n=new F(s.position,e);for(let t of i)if(p(new F(t.position,t.l),n))return{F:0};const r=[];for(let t of h)p(new F(t.position,t.l),n)||r.push(t);return{F:1,K:r}}function O(t,s){const i=s[s.length-1],o=new F(i.position,i.l);i.t=t.H();const a=o.i(i.t);return h([0,0],a,n([0,0],r([0,0],e([0,0],a,i.position)),H.h)),i}function z(s,i,o,a,c){let u=`${H.seed}-${i}`;s.U(u);const l=H.q,{D:f,J:d,bodies:w}=((s,i,e,r,o,a)=>{const c=((t,s,i)=>{if(void 0!==i)return{id:P(t),position:[2*i.l,i.position[1]],l:i.l,O:[],N:0,$:0};const h=E(t),e=t.B(0,h.l),n=t.B(0,h.l);return h.position=[2*h.l+e,2*h.l+n],h})(s,0,a),u=((t,s,i)=>{const h=E(t),e=h.l+H.h;return h.position=[t.B(i[0]-2*e,i[0]-e),t.B(e,i[1]-e)],h})(s,0,i);let l=c.position[0]+2*c.l,f=[];do{let h,n;do{h=E(s);const t=new J([l,2*h.l],[Math.min(l+4*h.l,u.position[0]-u.l),i[1]-2*h.l]);C(s,h,t)}while(I(h,[c,...f,u]));if(s.random()<t(t(.15,.4,o/20),.4,Math.min(e,50)/50)){n=k(s,0,h);let t=G(n,h,[c,u],f.filter((t=>t.id===h.id)));t.F?(f=t.K,h.O=[n.id]):n=void 0}else o=Math.min(20,++o);n?(o=0,l=h.position[0]+Math.abs(h.position[0]-n.position[0])+2*n.l,f.push(h,n)):(l=h.position[0]+2*h.l,f.push(h))}while(u.position[0]>l);if(s.random()<t(t(.1,.5,r/10),.5,Math.min(e,100)/100)){r=0;let t=((t,s)=>{const i=t.B(105,175),e=n([0,0],s,.5);return h(e,e,[t.B(0,i),t.B(0,i)]),{id:P(t),position:e,l:i,O:[],N:1,$:0}})(s,i),e=((t,s,i)=>{const h={F:0};if(I(t,s))return h;let e=[];for(let s of i)!I(t,[s])&&e.push(s);return 0===e.length?h:{F:1,K:e}})(t,[c,u],f);if(e.F)return{J:o,D:r,bodies:[c,...e.K,t,u]}}return{J:o,D:r=Math.min(10,++r),bodies:[c,...f,u]}})(s,l,i,o,a,c),{spawnPlanet:p,Y:x}=((t,s,i)=>{const o=s[0],a=new F(o.position,o.l);let c;const u=i??t.H();return c=a.i(u),h(c,c,n([0,0],r([0,0],e([0,0],c,o.position)),H.j)),{spawnPlanet:o,Y:c}})(s,w,c?.t);return{number:i,W:u,D:f,J:d,size:l,spawn:x,bodies:w,spawnPlanet:p,goalPlanet:O(s,w)}}class N extends class{constructor(){this.V=[],this.X=[]}Z(t){return this.V.push(t),{tt:()=>this.st(t)}}once(t){this.X.push(t)}st(t){var s=this.V.indexOf(t);s>-1&&this.V.splice(s,1)}it(t){if(this.V.forEach((s=>s(t))),this.X.length>0){const s=this.X;this.X=[],s.forEach((s=>s(t)))}}ht(t){return this.Z((s=>t.it(s)))}}{constructor(t){super(),this.et=0,this.nt=t,window.addEventListener("pointerdown",this.rt.bind(this)),window.addEventListener("pointermove",this.rt.bind(this)),window.addEventListener("pointerup",this.rt.bind(this)),window.addEventListener("blur",this.ot.bind(this))}ot(){this.et=0}rt(t){this.position=this.ct(this.nt,[t.clientX,t.clientY]),this.et=!!t.buttons,this.it(this.et)}ct(t,s){let i=t.getBoundingClientRect();return[t.width/i.width*(s[0]-i.left),t.height/i.height*(s[1]-i.top)]}ut(){return this.et}}const $=2*Math.PI,B=Math.pow(2,-1022);class F{constructor(t,s){this.position=t,this.l=s}i(t){return[this.position[0]+this.l*Math.cos(t),this.position[1]+this.l*Math.sin(t)]}}class K extends F{constructor(t,s,h=0,e,n,r,o,a){super(t,s),this._=[0,0],i(this._,this.position),this.m=h,this.M=e,this.acceleration=n,this.g=r??.8,this.lt=o??0,this.A=a??0}clone(){return new K(i([0,0],this.position),this.l,this.m,i([0,0],this.M),i([0,0],this.acceleration),this.g,this.lt,this.A)}}const H={q:[1920,1080],ft:164,dt:"g",seed:"HAR-INK-IPTS",wt:3e3,P:.8,xt:2e3,j:5,Mt:0,gt:1300,St:1,h:45,o:18,vt:50,bt:125,Tt:1e3,Pt:[200,25,1334,725],Rt:"HAR-INK-IPTS-",muted:0};class U extends K{constructor(t,s,i,h,e,n,r,o,a,c){super(t,s,s*s*Math.PI*H.wt,h,e,n,a,c),this.id=i,this.t=r,this.O=o??[],this.N=a??0,this.$=c??0}get color(){return l(this.N?15913899:this.$?4803966:9137564)}At(t,s){let h=[0,0];const r=u([0,0],(o=h,c=e(h,t.position,this.position),o[0]=Math.abs(c[0]),o[1]=Math.abs(c[1]),o),s);var o,c;t.L=this,t.acceleration=[0,0],t.M=[0,0],i(t.M,n(h,r,Math.sqrt(H.P*this.m/a(t.position,this.position))))}clone(){let t=new U(i([0,0],this.position),this.l,this.id,this.M,this.acceleration,this.g,this.t,[...this.O],this.N);return t.L=this.L,t}}class q{constructor(t,s,i){this.position=t??[0,0],this.T=s??[1,1],this.orientation=i??0}}class D{constructor(t,s){this.start=t,this.end=s}I(t){let s=this.end[0]-this.start[0],i=this.end[1]-this.start[1],h=Math.sqrt(s*s+i*i);return h>0&&(s/=h,i/=h),s*=h+t,i*=h+t,this.start[0]=this.start[0]+s,this.start[1]=this.start[1]+i,this}get u(){return[(this.start[0]+this.end[0])/2,(this.start[1]+this.end[1])/2]}get length(){return a(this.start,this.end)}get p(){return c(this.start,this.end)}}class J{constructor(t,s){this.position=t,this.size=s}static Lt(t,s){return new J(t,e([0,0],s,t))}get min(){const t=this.position,s=h([0,0],this.position,this.size);return[Math.min(t[0],s[0]),Math.min(t[1],s[1])]}get max(){const t=this.position,s=h([0,0],this.position,this.size);return[Math.max(t[0],s[0]),Math.max(t[1],s[1])]}}class Y{constructor({size:t,k:s,R:i,yt:h,spawnPlanet:e,goalPlanet:n}){this._t=[],this.Et=0,this.size=t,this.k=s,this.R=i,this.yt=h??1,this.spawnPlanet=e,this.goalPlanet=n}static kt(t){return new U(i([0,0],t.position),t.l,t.id,i([0,0],t.M),i([0,0],t.acceleration),t.g,t.t,t.O,t.N,t.$)}It(){const t=this.goalPlanet.i(this.goalPlanet.t);return h(t,t,n([0,0],r([0,0],e([0,0],t,this.goalPlanet.position)),H.h))}static Ct(t,s){i(s.position,t.spawn);const h=new Y({yt:t.number,size:t.size,k:s,R:t.bodies.map(Y.kt),spawnPlanet:Y.kt(t.spawnPlanet??t.bodies[0]),goalPlanet:Y.kt(t.goalPlanet??t.bodies[t.bodies.length-1])});for(let t of h.R)try{for(let s of t.O){const i=h.R.find((t=>t.id===s));i&&t.At(i)}}catch{}return h}step(t){this.k.step(),((t,s)=>{S([s.k,...s.R],s),v(s.k,t*H.St);for(let i of s.R)v(i,t*H.St)})(t,this);const s=(t=>{let s=0,i=0,h=0,e=t.k,n=t.R;for(let t of n)M(e,t,t.N)&&(s=1,t.N&&(h=1));let r=t.R.filter((t=>void 0!==t.t));for(let h of r)i=m(t.k,f(h)),i&&(s=1);return{Gt:s,Ot:i,zt:h}})(this);return this.k.Nt(),this._t=((t,s)=>{if(!t.k.$t)return[];let i=t.k.clone();i.Bt();let h=[];for(let e=0;H.bt>e&&(S([i],t),v(i,s),!M(i,i.L,i.L.lt)||!i.L.lt);e++)h.push([i.position[0],i.position[1]]);return h})(this,t),s}clone(){let t=new Y({size:i([0,0],this.size),k:this.k.clone(),R:this.R.map((t=>t.clone())),yt:this.yt,spawnPlanet:this.spawnPlanet.clone(),goalPlanet:this.goalPlanet.clone()});return t._t=[...this._t.map((t=>i([0,0],t)))],t.Et=this.Et,t}}class j{constructor(t,s){this.nt=t,this.Ft=document.createElement("canvas").getContext("2d"),this.Kt(),this.Ht=this.nt.getContext("2d"),this.Ut=s,this.qt=((t,s,i,h)=>{const e=document.createElement("canvas");e.id="bg",e.width=t,e.height=s;const n=e.getContext("2d"),r=[];for(;h>0;h--)r.push([i.random()*t,i.random()*s,1.2*i.random()]);n.fillStyle=R(l(2565956),1),n.fillRect(0,0,t,s);for(let t of r??[])n.beginPath(),n.arc(t[0],t[1],t[2],0,360),n.fillStyle=R(l(16512495),.8),n.fill();return e})(H.q[0],H.q[1],this.Ut,H.xt)}Kt(){this.nt.width=H.q[0],this.nt.height=H.q[1],this.Ft.canvas.width=H.q[0],this.Ft.canvas.height=H.q[1]}Dt(t,s){let i=[0,0];t.save();for(let o of s.R??[]){if(A(t,o,o.color),void 0!==o.t){const a=o.i(o.t),c=h([0,0],a,n(i,r(i,e(i,a,o.position)),H.h));y(t,""+s.yt,new D(a,c),o.t,l(13016997))}t.restore()}}Jt(t,s){t.save();for(let i=s.k.Yt.length-1;i>0;i--){const h=i/(s.k.Yt.length-1);A(t,new F(s.k.Yt[i],s.k.l),s.k.color,h)}if(s.k.jt&&s.k.$t&&s.k.Wt&&s.k.Qt){let i=[0,0];const o=s.k.Qt,a=h(i,o,n(i,s.k.$t,200*s.k.Wt));((t,s,i)=>{A(t,new F(s.start,3),i);const o=r([0,0],e([0,0],s.end,s.start)),a=d([1,0,0,1,0,0],2.356194490192345),c=d([1,0,0,1,0,0],-2.356194490192345),u=w([0,0],o,a),l=w([0,0],o,c);n(u,u,10),n(l,l,10);const f=new D(s.end,h([0,0],s.end,u)),p=new D(s.end,h([0,0],s.end,l));L(t,s,i,3),L(t,f,i,3),L(t,p,i,3)})(t,new D(o,a),l(16512495)),this.Vt(t,s)}t.restore()}Vt(t,s){t.save();for(let i of s._t)A(t,new F(i,1),l(16512495));t.restore()}Xt(t,s){t.save();const i=l(16512495),h={C:l(15913899),background:l(9137564),text:i};let e;t.font="normal 32px sans-serif",t.fillStyle=R(i,1),t.strokeStyle="black",t.lineWidth=4,t.textAlign="center",t.textBaseline="middle";let n=H.q[0]/2,r=24;const o=""+s.k.totalLaunches;if(e=t.measureText(o),t.strokeText(o,n,r),t.fillText(o,n,r),n+=e.width+24,s.k.holeLaunches>0){const i=`${s.k.holeLaunches>0?"+":""}${s.k.holeLaunches}`;t.strokeText(i,n,r),t.fillText(i,n,r)}t.restore(),t.save(),n=8,r=H.q[1]-28,_(t,s.k.Zt,"slo-mo",[n,r],h),r-=26,_(t,100-s.k.ts/s.k.ss*100,"launches",[n,r],h),r-=26;const a=~~(100-s.k.hs/H.Tt*100);100>a&&_(t,a,"respawn",[n,r],h),t.restore()}es(t,s){t.save(),t.restore()}ns(t,s){const i=n([0,0],H.q,.5);t.save(),A(t,new F(i,400),s.k.color),t.translate(.5,.5),t.font="bold 38px sans-serif",t.fillStyle=R(l(2565956),1),t.strokeStyle="black",t.lineWidth=4,t.textAlign="center",t.textBaseline="middle";let h=i[0],e=i[1]-74;t.fillText("INTERPLANETARY TRANSPORT SYSTEM",h,e),e+=44,t.font="italic 32px sans-serif",t.fillText("A JS13K GAME BY",h,e),e+=44,t.font="bold 32px sans-serif",t.fillText("RIK HARINK",h,e),e+=88,t.fillText("CONTROLS MOUSE/TOUCH",h,e),e+=24,t.font="bold 16px sans-serif",t.fillText("M TO MUTE, R TO RESET CURRENT HOLE",h,e),e+=44,t.font="italic 24px sans-serif",t.fillText("CLICK TO START",h,e),t.fillStyle=R(s.k.color,1),t.font="bold 24px sans-serif",t.fillText("https://github.com/rikharink/js13k-2021-space/",h,H.q[1]-24),t.restore()}rs(t,s){const i=this.Ht;i.save(),i.drawImage(this.qt,0,0),s?this.ns(i,t):(this.Dt(i,t),this.Jt(i,t),this.Xt(i,t)),i.restore()}}class W{constructor(t){this.U(t)}U(t){this.os=this.cs(t),this.random()}cs(t){for(var s=0,i=2166136261;t.length>s;s++)i=Math.imul(i^t.charCodeAt(s),16777619);return i+=i<<13,i^=i>>>7,i+=i<<3,i^=i>>>17,(i+=i<<5)>>>0}random(){return this.os=Math.imul(48271,this.os),(2**31-1&this.os)/2**31}get us(){return this.os}set us(t){this.os=t}B(t,s){return this.random()*(s-t+1)+t}G(t,s){return Math.floor(this.B(Math.ceil(t),Math.floor(s)))}ls(t){return()=>this.G(1,t)}fs(t){for(let s=0;t.length-2>s;s++)T(t,s,this.G(s,t.length-1))}ds(t){return t[this.G(0,t.length)]}ws(){return(t=>{let[s,i,h]=t,e=s;return e=(e<<8)+i,e=(e<<8)+h,e})([this.G(0,255),this.G(0,255),this.G(0,255)])}H(){return this.B(0,$)}}class Q{constructor(){this.ps=0,document.monetization&&("started"!==document.monetization.state&&"stopped"!==document.monetization.state?document.monetization.addEventListener("monetizationstart",this.xs.bind(this)):(this.ps="started"===document.monetization.state,this.ps&&this.Ms()))}xs(){this.ps=1,this.Ms()}Ms(){}}let V,X,Z;X=.6;class tt extends K{constructor(t,s){super([10,10],H.j,H.Mt,[0,0],[0,0]),this.color=l(16512495),this.gs=0,this.ts=0,this.totalLaunches=0,this.holeLaunches=0,this.ss=3,this.Ss=4*H.ft,this.vs=4*H.ft,this.bs=0,this.Yt=[],this.hs=0,this.Ts=0,this.Ps=0,this.S=0,this.Rs=0,this.As=0,this.Ls=0,this.id=s,this.ys=t}_s(){this.Es()}step(){if(this.ks&&this.Rs++,this.Rs>30&&(this.Rs=0,this.As=0,this.ts=0,this.Is=i([0,0],this.position),this.Ps=0),this.ts===this.ss&&this.As++,this.As>3*H.ft&&(this.ts=Math.min(0,this.ts-1),this.As=0),this.bs?(this.vs>0||(this.bs=0,H.St=1),this.vs--):(H.St=1,this.Ss>this.vs&&(this.vs+=.1)),this.L&&!x(this,new J([0,0],H.q))){this.Ts=1;const t=r([0,0],e([0,0],this.position,this.L.position));o(r([0,0],this.M),t)>0?this.hs++:this.hs=0}else this.hs=0,this.Ts=0;this.hs>H.Tt&&(this.hs=0,i(this.position,this.Is),this.M=[0,0])}Cs(){this.totalLaunches+=this.holeLaunches,this.holeLaunches=0}get Zt(){return~~(this.vs/this.Ss*100)}get ks(){return!(!s((t=this.position)[0],(i=this._)[0],h)||!s(t[1],i[1],h));var t,i,h}get jt(){return this.ss>this.ts}Nt(t){t??1?(this.Yt.push(i([0,0],this.position)),this.Yt.length>H.vt&&this.Yt.shift()):this.Yt=[i([0,0],this.position),i([0,0],this.position)]}Es(){if(!this.Ls)return;if(!this.jt)return void(H.St=1);const t=this.ys.ut();var s,h,n;!this.gs&&t?(this.$t=[0,0],this.Qt=i([0,0],this.ys.position),1>this.ts||(H.St=.1,this.bs=1)):this.gs&&!t?(this.Bt(),V&&!H.muted&&V(...[.8,,250,.01,,.01,,.2,-.2,-4,-50,-.32,.01,,,,.09,.98,.04,.06])):this.ys.position&&this.Qt&&(h=this.$t,n=r(this.$t,e(this.$t,this.ys.position,this.Qt)),h[0]=-n[0],h[1]=-n[1],this.Wt=(s=a(this.Qt,this.ys.position),Math.max(0,Math.min(100,s))/100)),this.gs=t}Bt(){n(this.M,this.$t,H.gt*this.Wt*(this.bs?.5:1)),this.Qt=void 0,this.$t=void 0,this.Wt=void 0,this.ts++,this.holeLaunches++,this.bs=0,this.Ps=1}clone(){let t=new tt(this.ys,this.id);return t.L=this.L?.clone(),t.position=i([0,0],this.position),t._=i([0,0],this._),t.M=i([0,0],this.M),t.acceleration=i([0,0],this.acceleration),t.gs=this.gs,t.$t=i([0,0],this.$t),t.Wt=this.Wt,t.totalLaunches=this.totalLaunches,t.holeLaunches=this.holeLaunches,t.ts=this.ts,t.Qt=i([0,0],this.Qt),t.ss=this.ss,t.vs=this.vs,t.Yt=this.Yt.map((t=>i([0,0],t))),t.Ts=this.Ts,t.hs=this.hs,t.Ls=this.Ls,t.Ps=this.Ps,t.S=this.S,t}}let st=new class{constructor(){this.Gs=60,this.isActive=0,this.Os=0,this.zs=0,this.Ns=0,this.$s=0,this.Bs=1,this.Fs=void 0,this.Ks=void 0,this.Hs=0,this.Us=0,this.Et=0,this.qs=1,this.Ds=document.getElementById(H.dt),this.Js=new N(this.Ds),this.Ys=new Q,this.Ut=new W(H.seed),this.js=new j(this.Ds,this.Ut),window.addEventListener("focus",this.start.bind(this)),window.addEventListener("blur",this.stop.bind(this)),this.Ws()||this.Qs(z(this.Ut,this.Bs,0,0)),this.currentState.k.Ls=!this.qs,document.addEventListener("pointerup",this.Vs.bind(this))}Vs(){this.qs=0,this.currentState.k.Ls=1,this.Xs(),V||(Z=new(window.AudioContext||webkitAudioContext),V=(t=1,s=.05,i=220,h=0,e=0,n=.1,r=0,o=1,a=0,c=0,u=0,l=0,f=0,d=0,w=0,p=0,x=0,M=1,m=0,g=0)=>{let S,v,b=Math,T=44100,P=2*b.PI,R=a*=500*P/T/T,A=i*=(1-s+2*s*b.random(s=[]))*P/T,L=0,y=0,_=0,E=1,k=0,I=0,C=0;for(c*=500*P/T**3,w*=P/T,u*=P/T,l*=T,f=T*f|0,v=(h=T*h+9)+(m*=T)+(e*=T)+(n*=T)+(x*=T)|0;v>_;s[_++]=C)++I%(100*p|0)||(C=r?r>1?r>2?r>3?b.sin((L%P)**3):b.max(b.min(b.tan(L),1),-1):1-(2*L/P%2+2)%2:1-4*b.abs(b.round(L/P)-L/P):b.sin(L),C=(f?1-g+g*b.sin(P*_/f):1)*(C>0?1:-1)*b.abs(C)**o*t*.6*(h>_?_/h:h+m>_?1-(_-h)/m*(1-M):h+m+e>_?M:v-x>_?(v-_-x)/n*M:0),C=x?C/2+(x>_?0:(v-x>_?1:(v-_)/x)*s[_-x|0]/2):C),S=(i+=a+=c)*b.cos(w*y++),L+=S-S*d*(1-1e9*(b.sin(_)+1)%2),E&&++E>l&&(i+=u,A+=u,E=0),!f||++k%f||(i=A,a=R,E=E||1);return(t=Z.createBuffer(1,v,T)).getChannelData(0).set(s),(i=Z.createBufferSource()).buffer=t,i.connect(Z.destination),i.start(),i})}reset(){localStorage.removeItem(H.Rt+"STATE"),this.currentState=void 0,this.qs=1,this.Ut=new W(H.seed),this.Bs=1,this.Qs(z(this.Ut,this.Bs,0,0))}Qs(t){this.Ut.U(t.W),this.Bs=t.number,this.Zs=t;const s=this.currentState?.k??new tt(this.Js,P(this.Ut));this.currentState=Y.Ct(t,s),this.ti=this.currentState}si(){this.currentState.k.M=[0,0],this.currentState.k.acceleration=[0,0],i(this.currentState.k.position,this.currentState.k.Is)}Ws(){try{const t=localStorage.getItem(H.Rt+"STATE");if(t){const s=JSON.parse(t);if(s)return this.qs=s.qs,this.Qs(s.level),this.currentState.k.totalLaunches=s.totalLaunches,this.currentState.k.holeLaunches=s.holeLaunches,s.position&&(this.currentState.k.position=s.position),this.currentState.k.Ls=!s.qs,1}}catch(t){}return 0}Xs(){localStorage.setItem(H.Rt+"STATE",JSON.stringify({v:1,level:this.Zs,holeLaunches:this.currentState.k.holeLaunches,totalLaunches:this.currentState.k.totalLaunches,position:this.currentState.k.Is,qs:this.qs}))}start(){void 0===this.ii&&(this.ii=requestAnimationFrame(this.hi.bind(this)),this.isActive=1)}stop(){this.ii&&cancelAnimationFrame(this.ii),this.ii=void 0,this.isActive=0,this.qs=1}ei(t){let s=.001*t;return this.Os=s-this.Ns,this.Ns=s,this.zs+=this.Os,this.Gs=.9*this.Gs+1/this.Os*(1-.9),1>this.zs||(this.zs=0),s}ni(){this.Ks=z(this.Ut,++this.Bs,this.Zs.D,this.Zs.J,this.Zs.goalPlanet),this.Fs=(t=>{this.Hs=0,this.Us=0,this.Fs=void 0,this.Ks=void 0,this.currentState.k.Cs(),this.currentState.k.position=i([0,0],t.spawn),this.currentState.k.Ls=1,H.h=45,this.Qs(t)}).bind(this)}ri(){}oi(){this.currentState.k.S=1,this.currentState.step(1/H.ft),this.Hs=this.currentState.k.ks}ai(){H.h--,H.h>0||(this.Us=1)}ci(){this.currentState.R[this.currentState.R.length-1].position[0]>this.Ks.spawnPlanet.position[0]?(this.currentState.k.position[0]=this.currentState.k.position[0]-3,this.currentState.k.Nt(0),this.currentState.R.forEach((t=>t.position[0]=~~(t.position[0]-3)))):this.Fs(this.Ks)}hi(t){if(this.ii=requestAnimationFrame(this.hi.bind(this)),t=this.ei(t),1>=this.Os){if(!this.qs)for(this.currentState.k._s(),this.$s+=this.Os,this.$s+=this.Os;this.$s>=1/H.ft;){if(this.ti=this.currentState.clone(),this.Fs&&this.Ks)this.Hs?this.Us?this.ci():(this.currentState.k.S=0,this.ai()):this.oi();else{const{Ot:s,zt:h,Gt:e}=this.currentState.step(1/H.ft);if(s)V&&!H.muted&&V(...[.8,,158,,.2,.55,1,1.53,.7,3,-104,.08,.09,,,.1,,.77,.09,.19]),this.currentState.k.Ls=0,i(this.currentState.k.M,[0,0]),this.Xs(),this.ni();else if(h)V&&!H.muted&&V(...[.6,,438,,.04,.4,2,1.78,,6.8,,,,.3,-6.2,.5,.04,.8,.05]),this.si();else if(e){const s=t-this.Et;this.currentState.k.Ps&&s>.05&&(this.Et=t,V&&!H.muted&&V(...[,.15,261.6256,.03,,.08,,1.2,-.2,-.1,-50,,-.01,-.2,,,,1.1,,.17]))}}this.$s-=1/H.ft,t+=this.Os}this.js.rs((s=this.ti,((t,s)=>{let i=s.clone();return h(i.k.position,t.k.position,s.k.position),h(i.k.acceleration,t.k.acceleration,s.k.acceleration),h(i.k.M,t.k.M,s.k.M),i})(b(this.currentState,e=this.$s/this.Os),b(s,1-e))),this.qs)}var s,e}};st.start(),setInterval((()=>{st.Xs()}),1e4),window.addEventListener("unload",(()=>{st.Xs()})),window.addEventListener("keypress",(t=>{"r"===t.key?st.si():"m"===t.key&&(H.muted=!H.muted)}))}();
//# sourceMappingURL=bundle.js.map
