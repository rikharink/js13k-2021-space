!function(){function t(t,s,i=1e-5){let h;return t===s?1:(h=Math.abs(t-s),0===t||0===s||P>h?i*P>h:i>h/(Math.abs(t)+Math.abs(s)))}function s(t,s){if(s)return t[0]=s[0],t[1]=s[1],t}function i(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t}function h(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t}function e(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t}function n(t,s){const i=s[0],h=s[1];let e=i*i+h*h;return e>0&&(e=1/Math.sqrt(e)),t[0]=s[0]*e,t[1]=s[1]*e,t}function r(t,s){return Math.hypot(s[0]-t[0],s[1]-t[1])}function o(t,s){const i=s[0]-t[0],h=s[1]-t[1];return i*i+h*h}function c(t,s,i=1){return t[0]=s[1],t[1]=s[0],i?t[1]=-t[1]:t[0]=-t[0],n(t,t)}function u(t){return[(16711680&t)>>16,(65280&t)>>8,255&t]}function a(t=Math.random){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(s=>{let i=16*t()|0;return("x"==s?i:3&i|8).toString(16)}))}function l(t,s){return`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${s})`}function d(t){const s=t.t;let r=[0,0];const o=t.i(s),u=i([0,0],o,e(r,n(r,h(r,o,t.position)),S.h)),a=c([0,0],h(r,o,u));e(a,a,S.o);const l=i([0,0],u,a),d=new T(o,l);return new L(d.u,[S.h/2,S.o/2],s)}function f(t,s){const n=h([0,0],t.position,s.position),r=[1,0,0,1,0,0];return((t,s)=>{let i=Math.sin(s),h=Math.cos(s);t[0]=h,t[1]=i,t[2]=-i,t[3]=h,t[4]=0,t[5]=0})(r,-s.orientation),((t,s,i)=>{let h=s[0],e=s[1];t[0]=i[0]*h+i[2]*e+i[4],t[1]=i[1]*h+i[3]*e+i[5]})(n,n,r),((t,s)=>{const[i,h]=t.position,[e,n]=s.position,[r,o]=s.size;let c=i,u=h;e>i?c=e:i>e+r&&(c=e+r),n>h?u=n:h>n+o&&(u=n+o);let a=new T([i,h],[c,u]);return t.l*t.l>=a.m})(new _(i([0,0],n,s.p),t.l),new A([0,0],e([0,0],s.p,2)))}function w(t,i){if(t===i)return 0;if(((t,s)=>{const i=t.position[0]-s.position[0],h=t.position[1]-s.position[1],e=t.l+s.l;return e*e>i*i+h*h})(t,i)){let n=[0,0];s(t.position,t.v);const o=[(t.position[0]*i.l+i.position[1]*t.l)/(t.l+i.l),(t.position[1]*i.l+i.position[1]*t.l)/(t.l+i.l)];let c=[0,0];e(c,h(n,i.position,o),1/r(o,i.position));let u=2*(t.g[0]*c[0]+t.g[1]*c[1])/(t.M+i.M);return t.g=e(t.g,[t.g[0]-u*t.M*c[0]-u*i.M*c[0],t.g[1]-u*t.M*c[1]-u*i.M*c[1]],i.S),1}return 0}function m(t,s){const i=o(s.position,t.position);return 0!==i?S.P*(s.M/i):0}function p(t,s){let i,h,e;for(h of t){let t=-1/0;for(e of s._){if(h===e)continue;let s=m(h,e);t>s||(t=s,i=e)}h.B=i}}function x(t,r){if(!t.B||!t.acceleration)return;const o=[0,0];s(t.v,t.position),e(t.acceleration,n(o,h(o,t.B.position,t.position)),m(t,t.B)),t.g||(t.g=[0,0]),i(t.g,t.g,e(o,t.acceleration,r)),i(t.position,t.position,e(o,t.g,r))}function v(t,s){let i=t.clone();return e(i.I.position,i.I.position,s),e(i.I.acceleration,i.I.acceleration,s),e(i.I.g,i.I.g,s),i}function g(t,s,i,h=1){t.fillStyle=l(i,h),t.beginPath(),t.arc(s.position[0],s.position[1],s.l,0,6.283185307179586),t.closePath(),t.fill()}function M(t,s,i){t.lineWidth=1,t.lineCap="round",t.strokeStyle=l(i,1),t.beginPath(),t.moveTo(s.start[0],s.start[1]),t.lineTo(s.end[0],s.end[1]),t.closePath(),t.stroke()}function b(t,s,r){M(t,s,r);let o=[0,0];s.L(-S.o);let a=i([0,0],s.u,e(o,c([0,0],n(o,h(o,s.start,s.end))),S.o));t.fillStyle=l(u(15913899),1),t.beginPath(),t.moveTo(s.start[0],s.start[1]),t.lineTo(a[0],a[1]),t.lineTo(s.end[0],s.end[1]),t.closePath(),t.fill()}class y extends class{constructor(){this.T=[],this.A=[]}C(t){return this.T.push(t),{F:()=>this.$(t)}}once(t){this.A.push(t)}$(t){var s=this.T.indexOf(t);s>-1&&this.T.splice(s,1)}k(t){if(this.T.forEach((s=>s(t))),this.A.length>0){const s=this.A;this.A=[],s.forEach((s=>s(t)))}}R(t){return this.C((s=>t.k(s)))}}{constructor(t){super(),this.q=0,this.D=t,window.addEventListener("pointerdown",this.G.bind(this)),window.addEventListener("pointermove",this.G.bind(this)),window.addEventListener("pointerup",this.G.bind(this)),window.addEventListener("blur",this.O.bind(this))}O(){this.q=0}G(t){this.position=this.V(this.D,[t.clientX,t.clientY]),this.q=!!t.buttons,this.k(this.q)}V(t,s){let i=t.getBoundingClientRect();return[t.width/i.width*(s[0]-i.left),t.height/i.height*(s[1]-i.top)]}W(){return this.q}}const S={j:[1334,750],H:164,J:"g",seed:"IPTS",K:1e6,P:1,N:2e3,U:0,X:1300,Y:1,h:45,o:18,Z:50,tt:125},P=Math.pow(2,-1022);class _{constructor(t,s){this.position=t,this.l=s}i(t){return[this.position[0]+this.l*Math.cos(t),this.position[1]+this.l*Math.sin(t)]}}class z extends _{constructor(t,i,h=0,e,n,r=.8){super(t,i),this.v=[0,0],s(this.v,this.position),this.M=h,this.g=e,this.acceleration=n,this.S=r}st(t){const s=t[0]-this.position[0],i=t[1]-this.position[1];return this.l*this.l>s*s+i*i}clone(){return new z(s([0,0],this.position),this.l,this.M,s([0,0],this.g),s([0,0],this.acceleration),this.S)}}class B extends z{constructor(t,s){super([10,10],5,S.U,[0,0],[0,0]),this.color=u(13016997),this.it=0,this.ht=0,this.et=0,this.nt=2,this.rt=2*S.H,this.ot=2*S.H,this.ct=0,this.ut=[],this.at=0,this.id=s??a(),this.lt=t}dt(){this.ft()}step(){this.wt&&this.at++,this.at>30&&(this.at=0,this.ht=0),this.ct?(this.ot>0||(this.ct=0,S.Y=1),this.ot--):(S.Y=1,this.rt>this.ot&&(this.ot+=.1))}get xt(){return~~(this.ot/this.rt*100)}get wt(){return!(!t((s=this.position)[0],(i=this.v)[0],h)||!t(s[1],i[1],h));var s,i,h}get vt(){return this.nt>this.ht}gt(){this.ut.push(s([0,0],this.position)),this.ut.length>S.Z&&this.ut.shift()}ft(){if(!this.vt)return void(S.Y=1);const t=this.lt.W();var s,i,e;!this.it&&t?(this.Mt=[0,0],this.bt=this.lt.position,1>this.ht||(S.Y=.1,this.ct=1)):this.it&&!t?this.yt():this.lt.position&&this.bt&&(i=this.Mt,e=n(this.Mt,h(this.Mt,this.lt.position,this.bt)),i[0]=-e[0],i[1]=-e[1],this.St=(s=r(this.bt,this.lt.position),Math.max(0,Math.min(100,s))/100)),this.it=t}yt(){e(this.g,this.Mt,S.X*this.St*(this.ct?.5:1)),this.bt=void 0,this.Mt=void 0,this.St=void 0,this.ht++,this.et++,this.ct=0}clone(){let t=new B(this.lt);return t.id=this.id,t.B=this.B?.clone(),t.position=s([0,0],this.position),t.v=s([0,0],this.v),t.g=s([0,0],this.g),t.acceleration=s([0,0],this.acceleration),t.it=this.it,t.Mt=s([0,0],this.Mt),t.St=this.St,t.et=this.et,t.ht=this.ht,t.bt=s([0,0],this.bt),t.nt=this.nt,t.ot=this.ot,t.ut=this.ut.map((t=>s([0,0],t))),t}}class I extends z{constructor(t,s,i,h,e,n,r,o){super(t,s,i*S.K,e,n,r),this.color=u(9137564),this.id=h??a(),this.t=o}get Pt(){return S.P*this.M}_t(t){return Math.sqrt(this.Pt/t)}clone(){let t=new I(s([0,0],this.position),this.l,this.M,this.id,this.g,this.acceleration,this.S,this.t);return t.B=this.B,t}}class L{constructor(t,s,i){this.position=t??[0,0],this.p=s??[1,1],this.orientation=i??0}}class T{constructor(t,s){this.start=t,this.end=s}L(t){let s=this.end[0]-this.start[0],i=this.end[1]-this.start[1],h=Math.sqrt(s*s+i*i);return h>0&&(s/=h,i/=h),s*=h+t,i*=h+t,this.start[0]=this.start[0]+s,this.start[1]=this.start[1]+i,this}get u(){return[(this.start[0]+this.end[0])/2,(this.start[1]+this.end[1])/2]}get length(){return r(this.start,this.end)}get m(){return o(this.start,this.end)}}class A{constructor(t,s){this.position=t,this.size=s}static zt(t,s){return new A(t,h([0,0],s,t))}get min(){const t=this.position,s=i([0,0],this.position,this.size);return[Math.min(t[0],s[0]),Math.min(t[1],s[1])]}get max(){const t=this.position,s=i([0,0],this.position,this.size);return[Math.max(t[0],s[0]),Math.max(t[1],s[1])]}}class C{constructor({size:t,I:s,_:i}){this.Bt=[],this.size=t,this.I=s,this._=i}static It(t,i){let h=new B(t);return s(h.position,i.Lt),new C({size:i.size,I:h,_:i.Tt.map((t=>new I(s([0,0],t.position),t.l,t.M,t.id,s([0,0],t.g),s([0,0],t.acceleration),t.S,t.t)))})}step(t){this.I.step(),((t,s)=>{p([s.I,...s._],s);let i=[s.I,...s._];for(let s of i)x(s,t*S.Y)})(t,this);const s=(t=>{let s=0,i=0,h=[t.I,...t._];for(let t of h)for(let i of h)s=w(t,i);let e=t._.filter((t=>void 0!==t.t));for(let h of e)s=i=f(n=t.I,d(h))?(n.g=[0,0],1):0;var n;return{At:s,Ct:i}})(this);return this.I.gt(),this.Bt=((t,s)=>{if(!t.I.Mt)return[];let i=t.I.clone();i.yt();let h=[];for(let e=0;S.tt>e;e++)p([i],t),x(i,s),w(i,i.B),h.push([i.position[0],i.position[1]]);return h})(this,t),s}clone(){let t=new C({size:s([0,0],this.size),I:this.I.clone(),_:this._.map((t=>t.clone()))});return t.Bt=[...this.Bt.map((t=>s([0,0],t)))],t}}class F{constructor(t,s){this.Ft=0,this.D=t,this.$t=document.createElement("canvas").getContext("2d"),this.kt(),this.Rt=this.D.getContext("2d"),this.qt=s,this.Dt=((t,s,i,h)=>{const e=document.createElement("canvas");e.id="bg",e.width=t,e.height=s;const n=e.getContext("2d"),r=[];for(;h>0;h--)r.push([i()*t,i()*s,1.2*i()]);n.fillStyle=l(u(2565956),1),n.fillRect(0,0,t,s);for(let t of r??[])n.beginPath(),n.arc(t[0],t[1],t[2],0,360),n.fillStyle=l(u(16512495),.8),n.fill();return e})(S.j[0],S.j[1],this.qt,S.N)}set Gt(t){this.Ft=t}kt(){this.D.width=S.j[0],this.D.height=S.j[1],this.$t.canvas.width=S.j[0],this.$t.canvas.height=S.j[1]}Et(t,s){let r=[0,0];for(let o of s._??[])if(g(t,o,o.color),void 0!==o.t){const s=o.i(o.t),c=i([0,0],s,e(r,n(r,h(r,s,o.position)),S.h));b(t,new T(s,c),u(13016997))}}Ot(t,s){for(let i=s.I.ut.length-1;i>0;i--){const h=i/(s.I.ut.length-1);g(t,new _(s.I.ut[i],s.I.l),s.I.color,h)}if(s.I.vt&&s.I.Mt&&s.I.St){let h=[0,0];const n=i(h,s.I.position,e(h,s.I.Mt,100*s.I.St));((t,s,i)=>{M(t,s,i)})(t,new T(s.I.position,n),u(13016997));for(let i of s.Bt)g(t,new _(i,1),u(16512495))}}Vt(t,s){s.I.B&&M(t,new T(s.I.position,s.I.B.position),u(15913899)),t.fillStyle=l(u(16512495),1),t.fillRect(8,8,100,48),t.fillStyle=l(u(2565956),1),t.fillText("FPS: "+this.Ft,12,20),t.fillText("TLC: "+s.I.et,12,46),t.fillText(`SPP: ${s.I.xt}%`,12,33)}Wt(t){const s=this.$t;s.drawImage(this.Dt,0,0),this.Et(s,t),this.Ot(s,t),this.Vt(s,t),this.Rt.drawImage(this.$t.canvas,0,0)}}class ${constructor(){this.jt=0,document.monetization&&("started"!==document.monetization.state&&"stopped"!==document.monetization.state?document.monetization.addEventListener("monetizationstart",this.Ht.bind(this)):this.jt="started"===document.monetization.state)}Ht(){this.jt=1}}var k={size:[1920,1080],Lt:[155,246],Tt:[{position:[200,320],l:75,M:75},{position:[600,520],l:75,M:75},{position:[950,120],l:100,M:100,t:0}]};const R=new class{constructor(){this.Gt=60,this.isActive=0,this.Jt=0,this.Kt=0,this.Nt=0,this.Qt=0,this.Ut=document.getElementById(S.J),this.Xt=new y(this.Ut),this.Xt.once((()=>this.Yt=new AudioContext).bind(this)),this.Zt=new $,this.qt=(t=>{for(var s=0,i=2166136261;t.length>s;s++)i=Math.imul(i^t.charCodeAt(s),16777619);i+=i<<13,i^=i>>>7,i+=i<<3,i^=i>>>17;let h=(i+=i<<5)>>>0,e=()=>(2**31-1&(h=Math.imul(48271,h)))/2**31;return e(),e})(S.seed),this.ts=new F(this.Ut,this.qt),window.addEventListener("focus",this.start.bind(this)),window.addEventListener("blur",this.stop.bind(this)),this.ss(k)}ss(t){this.currentState=C.It(this.Xt,t),this.hs=this.currentState}start(){void 0===this.es&&(this.es=requestAnimationFrame(this.ns.bind(this)),this.isActive=1)}stop(){this.es&&cancelAnimationFrame(this.es),this.es=void 0,this.isActive=0}rs(t){let s=.001*t;return this.Jt=s-this.Nt,this.Nt=s,this.Kt+=this.Jt,this.Gt=.9*this.Gt+1/this.Jt*(1-.9),this.ts.Gt=~~this.Gt,1>this.Kt||(this.Kt=0),s}ns(t){if(this.es=requestAnimationFrame(this.ns.bind(this)),t=this.rs(t),1>=this.Jt){for(this.currentState.I.dt(),this.Qt+=this.Jt,this.Qt+=this.Jt;this.Qt>=1/S.H;)this.hs=this.currentState.clone(),this.currentState.step(1/S.H).Ct&&(this.currentState.I.position=s([0,0],k.Lt)),this.Qt-=1/S.H,t+=this.Jt;this.ts.Wt((h=this.hs,((t,s)=>{let h=s.clone();return i(h.I.position,t.I.position,s.I.position),i(h.I.acceleration,t.I.acceleration,s.I.acceleration),i(h.I.g,t.I.g,s.I.g),h})(v(this.currentState,e=this.Qt/this.Jt),v(h,1-e))))}var h,e}};class q{constructor(t,s){this.os=[];let i=t.captureStream();i&&(this.stream=i,this.cs=s||25e5,this.us=document.createElement("video"),this.us.style.display="none")}ls(){let t=["video/webm","video/webm,codecs=vp9","video/vp8","video/webm;codecs=vp8","video/webm;codecs=daala","video/webm;codecs=h264","video/mpeg"];for(let s in t)if(MediaRecorder.isTypeSupported(t[s])){this.ds=t[s];break}let s={mimeType:this.ds,videoBitsPerSecond:this.cs};this.os=[];try{this.fs=new MediaRecorder(this.stream,s)}catch(t){return}this.fs.onstop=this.ws.bind(this),this.fs.ondataavailable=this.ps.bind(this),this.fs.start(100)}ps(t){t.data&&t.data.size>0&&this.os.push(t.data)}ws(t){const s=new Blob(this.os,{type:this.ds});this.us.src=window.URL.createObjectURL(s)}xs(){this.fs.stop(),this.us.controls=1}download(t){const s=t||"recording.webm",i=new Blob(this.os,{type:this.ds}),h=window.URL.createObjectURL(i),e=document.createElement("a");e.style.display="none",e.href=h,e.download=s,document.body.appendChild(e),e.click(),setTimeout((()=>{document.body.removeChild(e),window.URL.revokeObjectURL(h)}),100)}}R.start();{const t=window;t.vs=()=>new q(document.getElementById("g")),document.addEventListener("keypress",(s=>{"r"===s.key?R.ss(k):"p"===s.key?R.isActive?R.stop():R.start():"o"===s.key?t.gs?t.gs&&(t.gs=0,t.Ms.xs(),t.Ms.download("IPTS-demo.webm"),delete t.Ms):(t.gs=1,t.Ms=t.vs(),t.Ms.ls()):"s"===s.key?S.Y=1>S.Y?1:.05:"b"===s.key&&R.currentState._.forEach((t=>{t.M=-10*t.M,t.acceleration=[0,0]}))}))}}();
//# sourceMappingURL=bundle.js.map
