{"version":3,"file":"bundle.js","sources":["../src/util/event-emitter.ts","../src/managers/gamepad-manager.ts","../src/managers/input-manager.ts","../src/index.ts","../src/game.ts","../src/math/color.ts"],"sourcesContent":[null,null,null,null,null,null],"names":["EventEmitter","constructor","this","h","listener","listeners","push","o","off","once","listenersOncer","l","callbackIndex","indexOf","splice","u","event","forEach","length","toCall","p","te","on","e","emit","GamepadManagerEventType","InputDevice","GamepadManager","super","Map","k","_started","I","_deadzoneTreshold","treshold","start","window","addEventListener","connect","bind","disconnect","gp","navigator","getGamepads","connectGamepad","stop","removeEventListener","disconnectGamepad","vibrate","gamepadIndex","effect","gamepad","getGamepadByIndex","vibrationActuator","playEffect","C","index","ev","M","_gamepads","set","F","K","q","D","B","has","delete","P","size","state","updateGamepadState","emitEvents","T","buttonsCache","Array","buttons","axesCache","axes","buttonsStatus","axesStatus","pressed","b","t","undefined","a","x","applyDeadzone","$","value","percentage","Math","abs","V","buttonsPrevious","buttonsCurrent","i","previous","current","type","GamepadButtonDown","_","button","GamepadButtonUp","axesChange","map","GamepadAxisChanged","axis","U","oldValue","j","InputManager","Set","emitIfSubcribedKeyboard","clearActionState","_gamepadManager","emitIfSubscribedGamepad","tick","et","st","action","_actionState","Z","clear","Y","_keyboardActionMappings","inputs","_actionMappings","get","filter","Keyboard","input","key","predicate","emitAction","preventDefault","tt","_gamepadActionMappings","Gamepad","actionType","at","result","ht","add","actions","formatActionString","aliases","_aliasMappings","flatMap","nt","subscribe","ot","events","addEvent","dt","addAction","subscribeKeyboard","subscribeGamepad","ct","lt","requestAnimationFrame","_canvas","document","getElementById","width","Settings","height","gl","getContext","_bg","rgb","_updateFPS","inputManager","_render","xt","clearColor","COLOR_BUFFER_BIT","St","_then","_dt","fps"],"mappings":"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"}